(()=>{var vi=Object.create;var gn=Object.defineProperty;var bi=Object.getOwnPropertyDescriptor;var _i=Object.getOwnPropertyNames;var yi=Object.getPrototypeOf,wi=Object.prototype.hasOwnProperty;var vn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var qi=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of _i(t))!wi.call(e,o)&&o!==n&&gn(e,o,{get:()=>t[o],enumerable:!(r=bi(t,o))||r.enumerable});return e};var bn=(e,t,n)=>(n=e!=null?vi(yi(e)):{},qi(t||!e||!e.__esModule?gn(n,"default",{value:e,enumerable:!0}):n,e));var yn=vn(_n=>{(function(){var e,t,n,r,o=function(l,s){return function(){return l.apply(s,arguments)}},a=function(l,s){for(var c in s)d.call(s,c)&&(l[c]=s[c]);function u(){this.constructor=l}return u.prototype=s.prototype,l.prototype=new u,l.__super__=s.prototype,l},d={}.hasOwnProperty;r=function(){function l(){this.options_index=0,this.parsed=[]}return l.prototype.add_node=function(s){return s.nodeName.toUpperCase()==="OPTGROUP"?this.add_group(s):this.add_option(s)},l.prototype.add_group=function(s){var c,u,p,m,g,b;for(c=this.parsed.length,this.parsed.push({array_index:c,group:!0,label:s.label,title:s.title?s.title:void 0,children:0,disabled:s.disabled,classes:s.className}),g=s.childNodes,b=[],u=0,p=g.length;u<p;u++)m=g[u],b.push(this.add_option(m,c,s.disabled));return b},l.prototype.add_option=function(s,c,u){if(s.nodeName.toUpperCase()==="OPTION")return s.text!==""?(c!=null&&(this.parsed[c].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:s.value,text:s.text,html:s.innerHTML,title:s.title?s.title:void 0,selected:s.selected,disabled:u===!0?u:s.disabled,group_array_index:c,group_label:c!=null?this.parsed[c].label:null,classes:s.className,style:s.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},l}(),r.select_to_array=function(l){var s,c,u,p,m;for(p=new r,m=l.childNodes,c=0,u=m.length;c<u;c++)s=m[c],p.add_node(s);return p.parsed},t=function(){function l(s,c){this.form_field=s,this.options=c??{},this.label_click_handler=o(this.label_click_handler,this),l.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return l.prototype.set_default_values=function(){return this.click_test_action=function(s){return function(c){return s.test_active_click(c)}}(this),this.activate_action=function(s){return function(c){return s.activate_field(c)}}(this),this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.is_rtl=this.options.rtl||/\bchosen-rtl\b/.test(this.form_field.className),this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:!0,this.group_search=this.options.group_search!=null?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:!0,this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:!0,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1,this.max_shown_results=this.options.max_shown_results||Number.POSITIVE_INFINITY,this.case_sensitive_search=this.options.case_sensitive_search||!1,this.hide_results_on_select=this.options.hide_results_on_select!=null?this.options.hide_results_on_select:!0},l.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||l.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||l.default_single_text,this.default_text=this.escape_html(this.default_text),this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||l.default_no_result_text},l.prototype.choice_label=function(s){return this.include_group_label_in_selected&&s.group_label!=null?"<b class='group-name'>"+this.escape_html(s.group_label)+"</b>"+s.html:s.html},l.prototype.mouse_enter=function(){return this.mouse_on_container=!0},l.prototype.mouse_leave=function(){return this.mouse_on_container=!1},l.prototype.input_focus=function(s){if(this.is_multiple){if(!this.active_field)return setTimeout(function(c){return function(){return c.container_mousedown()}}(this),50)}else if(!this.active_field)return this.activate_field()},l.prototype.input_blur=function(s){if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(c){return function(){return c.blur_test()}}(this),100)},l.prototype.label_click_handler=function(s){return this.is_multiple?this.container_mousedown(s):this.activate_field()},l.prototype.results_option_build=function(s){var c,u,p,m,g,b,w;for(c="",w=0,b=this.results_data,m=0,g=b.length;m<g&&(u=b[m],p="",u.group?p=this.result_add_group(u):p=this.result_add_option(u),p!==""&&(w++,c+=p),s?.first&&(u.selected&&this.is_multiple?this.choice_build(u):u.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(u))),!(w>=this.max_shown_results));m++);return c},l.prototype.result_add_option=function(s){var c,u;return!s.search_match||!this.include_option_in_results(s)?"":(c=[],!s.disabled&&!(s.selected&&this.is_multiple)&&c.push("active-result"),s.disabled&&!(s.selected&&this.is_multiple)&&c.push("disabled-result"),s.selected&&c.push("result-selected"),s.group_array_index!=null&&c.push("group-option"),s.classes!==""&&c.push(s.classes),u=document.createElement("li"),u.className=c.join(" "),s.style&&(u.style.cssText=s.style),u.setAttribute("data-option-array-index",s.array_index),u.innerHTML=s.highlighted_html||s.html,s.title&&(u.title=s.title),this.outerHTML(u))},l.prototype.result_add_group=function(s){var c,u;return!(s.search_match||s.group_match)||!(s.active_options>0)?"":(c=[],c.push("group-result"),s.classes&&c.push(s.classes),u=document.createElement("li"),u.className=c.join(" "),u.innerHTML=s.highlighted_html||this.escape_html(s.label),s.title&&(u.title=s.title),this.outerHTML(u))},l.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing)return this.winnow_results()},l.prototype.reset_single_select_options=function(){var s,c,u,p,m;for(u=this.results_data,m=[],s=0,c=u.length;s<c;s++)p=u[s],p.selected?m.push(p.selected=!1):m.push(void 0);return m},l.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},l.prototype.results_search=function(s){return this.results_showing?this.winnow_results():this.results_show()},l.prototype.winnow_results=function(s){var c,u,p,m,g,b,w,E,P,R,C,f,T,y,O;for(this.no_results_clear(),R=0,w=this.get_search_text(),c=w.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),P=this.get_search_regex(c),E=this.results_data,p=0,m=E.length;p<m;p++)g=E[p],g.search_match=!1,C=null,f=null,g.highlighted_html="",this.include_option_in_results(g)&&(g.group&&(g.group_match=!1,g.active_options=0),g.group_array_index!=null&&this.results_data[g.group_array_index]&&(C=this.results_data[g.group_array_index],C.active_options===0&&C.search_match&&(R+=1),C.active_options+=1),O=g.group?g.label:g.text,g.group&&!this.group_search||(f=this.search_string_match(O,P),g.search_match=f!=null,g.search_match&&!g.group&&(R+=1),g.search_match?(w.length&&(T=f.index,b=O.slice(0,T),u=O.slice(T,T+w.length),y=O.slice(T+w.length),g.highlighted_html=this.escape_html(b)+"<em>"+this.escape_html(u)+"</em>"+this.escape_html(y)),C!=null&&(C.group_match=!0)):g.group_array_index!=null&&this.results_data[g.group_array_index].search_match&&(g.search_match=!0)));if(this.result_clear_highlight(),R<1&&w.length)return this.update_results_content(""),this.no_results(w);if(this.update_results_content(this.results_option_build()),!s?.skip_highlight)return this.winnow_results_set_highlight()},l.prototype.get_search_regex=function(s){var c,u;return u=this.search_contains?s:"(^|\\s|\\b)"+s+"[^\\s]*",this.enable_split_word_search||this.search_contains||(u="^"+u),c=this.case_sensitive_search?"":"i",new RegExp(u,c)},l.prototype.search_string_match=function(s,c){var u;return u=c.exec(s),!this.search_contains&&u?.[1]&&(u.index+=1),u},l.prototype.choices_count=function(){var s,c,u,p;if(this.selected_option_count!=null)return this.selected_option_count;for(this.selected_option_count=0,p=this.form_field.options,s=0,c=p.length;s<c;s++)u=p[s],u.selected&&(this.selected_option_count+=1);return this.selected_option_count},l.prototype.choices_click=function(s){if(s.preventDefault(),this.activate_field(),!(this.results_showing||this.is_disabled))return this.results_show()},l.prototype.keydown_checker=function(s){var c,u;switch(u=(c=s.which)!=null?c:s.keyCode,this.search_field_scale(),u!==8&&this.pending_backstroke&&this.clear_backstroke(),u){case 8:this.backstroke_length=this.get_search_field_value().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(s),this.mouse_on_container=!1;break;case 13:this.results_showing&&s.preventDefault();break;case 27:this.results_showing&&s.preventDefault();break;case 32:this.disable_search&&s.preventDefault();break;case 38:s.preventDefault(),this.keyup_arrow();break;case 40:s.preventDefault(),this.keydown_arrow();break}},l.prototype.keyup_checker=function(s){var c,u;switch(u=(c=s.which)!=null?c:s.keyCode,this.search_field_scale(),u){case 8:this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0?this.keydown_backstroke():this.pending_backstroke||(this.result_clear_highlight(),this.results_search());break;case 13:s.preventDefault(),this.results_showing&&this.result_select(s);break;case 27:this.results_showing&&this.results_hide();break;case 9:case 16:case 17:case 18:case 38:case 40:case 91:break;default:this.results_search();break}},l.prototype.clipboard_event_checker=function(s){if(!this.is_disabled)return setTimeout(function(c){return function(){return c.results_search()}}(this),50)},l.prototype.container_width=function(){return this.options.width!=null?this.options.width:this.form_field.offsetWidth+"px"},l.prototype.include_option_in_results=function(s){return!(this.is_multiple&&!this.display_selected_options&&s.selected||!this.display_disabled_options&&s.disabled||s.empty)},l.prototype.search_results_touchstart=function(s){return this.touch_started=!0,this.search_results_mouseover(s)},l.prototype.search_results_touchmove=function(s){return this.touch_started=!1,this.search_results_mouseout(s)},l.prototype.search_results_touchend=function(s){if(this.touch_started)return this.search_results_mouseup(s)},l.prototype.outerHTML=function(s){var c;return s.outerHTML?s.outerHTML:(c=document.createElement("div"),c.appendChild(s),c.innerHTML)},l.prototype.get_single_html=function(){return`<a class="chosen-single chosen-default">
  <span>`+this.default_text+`</span>
  <div><b></b></div>
</a>
<div class="chosen-drop">
  <div class="chosen-search">
    <input class="chosen-search-input" type="text" autocomplete="off" />
  </div>
  <ul class="chosen-results"></ul>
</div>`},l.prototype.get_multi_html=function(){return`<ul class="chosen-choices">
  <li class="search-field">
    <input class="chosen-search-input" type="text" autocomplete="off" value="`+this.default_text+`" />
  </li>
</ul>
<div class="chosen-drop">
  <ul class="chosen-results"></ul>
</div>`},l.prototype.get_no_results_html=function(s){return`<li class="no-results">
  `+this.results_none_found+" <span>"+this.escape_html(s)+`</span>
</li>`},l.browser_is_supported=function(){return window.navigator.appName==="Microsoft Internet Explorer"?document.documentMode>=8:!(/iP(od|hone)/i.test(window.navigator.userAgent)||/IEMobile/i.test(window.navigator.userAgent)||/Windows Phone/i.test(window.navigator.userAgent)||/BlackBerry/i.test(window.navigator.userAgent)||/BB10/i.test(window.navigator.userAgent)||/Android.*Mobile/i.test(window.navigator.userAgent))},l.default_multiple_text="Select Some Options",l.default_single_text="Select an Option",l.default_no_result_text="No results match",l}(),e=jQuery,e.fn.extend({chosen:function(l){return t.browser_is_supported()?this.each(function(s){var c,u;if(c=e(this),u=c.data("chosen"),l==="destroy"){u instanceof n&&u.destroy();return}u instanceof n||c.data("chosen",new n(this,l))}):this}}),n=function(l){a(s,l);function s(){return s.__super__.constructor.apply(this,arguments)}return s.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex},s.prototype.set_up_html=function(){var c,u;return c=["chosen-container"],c.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&c.push(this.form_field.className),this.is_rtl&&c.push("chosen-rtl"),u={class:c.join(" "),title:this.form_field.title},this.form_field.id.length&&(u.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",u),this.container.width(this.container_width()),this.is_multiple?this.container.html(this.get_multi_html()):this.container.html(this.get_single_html()),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},s.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},s.prototype.register_observers=function(){return this.container.on("touchstart.chosen",function(c){return function(u){c.container_mousedown(u)}}(this)),this.container.on("touchend.chosen",function(c){return function(u){c.container_mouseup(u)}}(this)),this.container.on("mousedown.chosen",function(c){return function(u){c.container_mousedown(u)}}(this)),this.container.on("mouseup.chosen",function(c){return function(u){c.container_mouseup(u)}}(this)),this.container.on("mouseenter.chosen",function(c){return function(u){c.mouse_enter(u)}}(this)),this.container.on("mouseleave.chosen",function(c){return function(u){c.mouse_leave(u)}}(this)),this.search_results.on("mouseup.chosen",function(c){return function(u){c.search_results_mouseup(u)}}(this)),this.search_results.on("mouseover.chosen",function(c){return function(u){c.search_results_mouseover(u)}}(this)),this.search_results.on("mouseout.chosen",function(c){return function(u){c.search_results_mouseout(u)}}(this)),this.search_results.on("mousewheel.chosen DOMMouseScroll.chosen",function(c){return function(u){c.search_results_mousewheel(u)}}(this)),this.search_results.on("touchstart.chosen",function(c){return function(u){c.search_results_touchstart(u)}}(this)),this.search_results.on("touchmove.chosen",function(c){return function(u){c.search_results_touchmove(u)}}(this)),this.search_results.on("touchend.chosen",function(c){return function(u){c.search_results_touchend(u)}}(this)),this.form_field_jq.on("chosen:updated.chosen",function(c){return function(u){c.results_update_field(u)}}(this)),this.form_field_jq.on("chosen:activate.chosen",function(c){return function(u){c.activate_field(u)}}(this)),this.form_field_jq.on("chosen:open.chosen",function(c){return function(u){c.container_mousedown(u)}}(this)),this.form_field_jq.on("chosen:close.chosen",function(c){return function(u){c.close_field(u)}}(this)),this.search_field.on("blur.chosen",function(c){return function(u){c.input_blur(u)}}(this)),this.search_field.on("keyup.chosen",function(c){return function(u){c.keyup_checker(u)}}(this)),this.search_field.on("keydown.chosen",function(c){return function(u){c.keydown_checker(u)}}(this)),this.search_field.on("focus.chosen",function(c){return function(u){c.input_focus(u)}}(this)),this.search_field.on("cut.chosen",function(c){return function(u){c.clipboard_event_checker(u)}}(this)),this.search_field.on("paste.chosen",function(c){return function(u){c.clipboard_event_checker(u)}}(this)),this.is_multiple?this.search_choices.on("click.chosen",function(c){return function(u){c.choices_click(u)}}(this)):this.container.on("click.chosen",function(c){c.preventDefault()})},s.prototype.destroy=function(){return e(this.container[0].ownerDocument).off("click.chosen",this.click_test_action),this.form_field_label.length>0&&this.form_field_label.off("click.chosen"),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},s.prototype.search_field_disabled=function(){if(this.is_disabled=this.form_field.disabled||this.form_field_jq.parents("fieldset").is(":disabled"),this.container.toggleClass("chosen-disabled",this.is_disabled),this.search_field[0].disabled=this.is_disabled,this.is_multiple||this.selected_item.off("focus.chosen",this.activate_field),this.is_disabled)return this.close_field();if(!this.is_multiple)return this.selected_item.on("focus.chosen",this.activate_field)},s.prototype.container_mousedown=function(c){var u;if(!this.is_disabled&&(c&&((u=c.type)==="mousedown"||u==="touchstart")&&!this.results_showing&&c.preventDefault(),!(c!=null&&e(c.target).hasClass("search-choice-close"))))return this.active_field?!this.is_multiple&&c&&(e(c.target)[0]===this.selected_item[0]||e(c.target).parents("a.chosen-single").length)&&(c.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(this.container[0].ownerDocument).on("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},s.prototype.container_mouseup=function(c){if(c.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(c)},s.prototype.search_results_mousewheel=function(c){var u;if(c.originalEvent&&(u=c.originalEvent.deltaY||-c.originalEvent.wheelDelta||c.originalEvent.detail),u!=null)return c.preventDefault(),c.type==="DOMMouseScroll"&&(u=u*40),this.search_results.scrollTop(u+this.search_results.scrollTop())},s.prototype.blur_test=function(c){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},s.prototype.close_field=function(){return e(this.container[0].ownerDocument).off("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale(),this.search_field.blur()},s.prototype.activate_field=function(){if(!this.is_disabled)return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},s.prototype.test_active_click=function(c){var u;return u=e(c.target).closest(".chosen-container"),u.length&&this.container[0]===u[0]?this.active_field=!0:this.close_field()},s.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=r.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},s.prototype.result_do_highlight=function(c){var u,p,m,g,b;if(c.length){if(this.result_clear_highlight(),this.result_highlight=c,this.result_highlight.addClass("highlighted"),m=parseInt(this.search_results.css("maxHeight"),10),b=this.search_results.scrollTop(),g=m+b,p=this.result_highlight.position().top+this.search_results.scrollTop(),u=p+this.result_highlight.outerHeight(),u>=g)return this.search_results.scrollTop(u-m>0?u-m:0);if(p<b)return this.search_results.scrollTop(p)}},s.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},s.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.get_search_field_value()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},s.prototype.update_results_content=function(c){return this.search_results.html(c)},s.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},s.prototype.set_tab_index=function(c){var u;if(this.form_field.tabIndex)return u=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=u},s.prototype.set_label_behavior=function(){if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.on("click.chosen",this.label_click_handler)},s.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},s.prototype.search_results_mouseup=function(c){var u;if(u=e(c.target).hasClass("active-result")?e(c.target):e(c.target).parents(".active-result").first(),u.length)return this.result_highlight=u,this.result_select(c),this.search_field.focus()},s.prototype.search_results_mouseover=function(c){var u;if(u=e(c.target).hasClass("active-result")?e(c.target):e(c.target).parents(".active-result").first(),u)return this.result_do_highlight(u)},s.prototype.search_results_mouseout=function(c){if(e(c.target).hasClass("active-result")||e(c.target).parents(".active-result").first())return this.result_clear_highlight()},s.prototype.choice_build=function(c){var u,p;return u=e("<li />",{class:"search-choice"}).html("<span>"+this.choice_label(c)+"</span>"),c.disabled?u.addClass("search-choice-disabled"):(p=e("<a />",{class:"search-choice-close","data-option-array-index":c.array_index}),p.on("click.chosen",function(m){return function(g){return m.choice_destroy_link_click(g)}}(this)),u.append(p)),this.search_container.before(u)},s.prototype.choice_destroy_link_click=function(c){if(c.preventDefault(),c.stopPropagation(),!this.is_disabled)return this.choice_destroy(e(c.target))},s.prototype.choice_destroy=function(c){if(this.result_deselect(c[0].getAttribute("data-option-array-index")))return this.active_field?this.search_field.focus():this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.get_search_field_value().length<1&&this.results_hide(),c.parents("li").first().remove(),this.search_field_scale()},s.prototype.results_reset=function(){if(this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.trigger_form_field_change(),this.active_field)return this.results_hide()},s.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},s.prototype.result_select=function(c){var u,p;if(this.result_highlight)return u=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?u.removeClass("active-result"):this.reset_single_select_options(),u.addClass("result-selected"),p=this.results_data[u[0].getAttribute("data-option-array-index")],p.selected=!0,this.form_field.options[p.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(p):this.single_set_selected_text(this.choice_label(p)),this.is_multiple&&(!this.hide_results_on_select||c.metaKey||c.ctrlKey)?c.metaKey||c.ctrlKey?this.winnow_results({skip_highlight:!0}):(this.search_field.val(""),this.winnow_results()):(this.results_hide(),this.show_search_field_default()),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.trigger_form_field_change({selected:this.form_field.options[p.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,c.preventDefault(),this.search_field_scale())},s.prototype.single_set_selected_text=function(c){return c==null&&(c=this.default_text),c===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(c)},s.prototype.result_deselect=function(c){var u;return u=this.results_data[c],this.form_field.options[u.options_index].disabled?!1:(u.selected=!1,this.form_field.options[u.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.trigger_form_field_change({deselected:this.form_field.options[u.options_index].value}),this.search_field_scale(),!0)},s.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},s.prototype.get_search_field_value=function(){return this.search_field.val()},s.prototype.get_search_text=function(){return e.trim(this.get_search_field_value())},s.prototype.escape_html=function(c){return e("<div/>").text(c).html()},s.prototype.winnow_results_set_highlight=function(){var c,u;if(u=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),c=u.length?u.first():this.search_results.find(".active-result").first(),c!=null)return this.result_do_highlight(c)},s.prototype.no_results=function(c){var u;return u=this.get_no_results_html(c),this.search_results.append(u),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},s.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},s.prototype.keydown_arrow=function(){var c;if(this.results_showing&&this.result_highlight){if(c=this.result_highlight.nextAll("li.active-result").first(),c)return this.result_do_highlight(c)}else return this.results_show()},s.prototype.keyup_arrow=function(){var c;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight)return c=this.result_highlight.prevAll("li.active-result"),c.length?this.result_do_highlight(c.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())},s.prototype.keydown_backstroke=function(){var c;if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();if(c=this.search_container.siblings("li.search-choice").last(),c.length&&!c.hasClass("search-choice-disabled"))return this.pending_backstroke=c,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")},s.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},s.prototype.search_field_scale=function(){var c,u,p,m,g,b,w;if(this.is_multiple){for(g={position:"absolute",left:"-1000px",top:"-1000px",display:"none",whiteSpace:"pre"},b=["fontSize","fontStyle","fontWeight","fontFamily","lineHeight","textTransform","letterSpacing"],u=0,p=b.length;u<p;u++)m=b[u],g[m]=this.search_field.css(m);return c=e("<div />").css(g),c.text(this.get_search_field_value()),e("body").append(c),w=c.width()+25,c.remove(),this.container.is(":visible")&&(w=Math.min(this.container.outerWidth()-10,w)),this.search_field.width(w)}},s.prototype.trigger_form_field_change=function(c){return this.form_field_jq.trigger("input",c),this.form_field_jq.trigger("change",c)},s}(t)}).call(_n)});var $n=vn((st,zt)=>{(function(t,n){typeof st=="object"&&typeof zt=="object"?zt.exports=n():typeof define=="function"&&define.amd?define([],n):typeof st=="object"?st.ClipboardJS=n():t.ClipboardJS=n()})(st,function(){return function(){var e={686:function(r,o,a){"use strict";a.d(o,{default:function(){return se}});var d=a(279),l=a.n(d),s=a(370),c=a.n(s),u=a(817),p=a.n(u);function m(L){try{return document.execCommand(L)}catch{return!1}}var g=function(_){var q=p()(_);return m("cut"),q},b=g;function w(L){var _=document.documentElement.getAttribute("dir")==="rtl",q=document.createElement("textarea");q.style.fontSize="12pt",q.style.border="0",q.style.padding="0",q.style.margin="0",q.style.position="absolute",q.style[_?"right":"left"]="-9999px";var k=window.pageYOffset||document.documentElement.scrollTop;return q.style.top="".concat(k,"px"),q.setAttribute("readonly",""),q.value=L,q}var E=function(_,q){var k=w(_);q.container.appendChild(k);var x=p()(k);return m("copy"),k.remove(),x},P=function(_){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},k="";return typeof _=="string"?k=E(_,q):_ instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(_?.type)?k=E(_.value,q):(k=p()(_),m("copy")),k},R=P;function C(L){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?C=function(q){return typeof q}:C=function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},C(L)}var f=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=_.action,k=q===void 0?"copy":q,x=_.container,I=_.target,K=_.text;if(k!=="copy"&&k!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(I!==void 0)if(I&&C(I)==="object"&&I.nodeType===1){if(k==="copy"&&I.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(k==="cut"&&(I.hasAttribute("readonly")||I.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(K)return R(K,{container:x});if(I)return k==="cut"?b(I):R(I,{container:x})},T=f;function y(L){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?y=function(q){return typeof q}:y=function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},y(L)}function O(L,_){if(!(L instanceof _))throw new TypeError("Cannot call a class as a function")}function W(L,_){for(var q=0;q<_.length;q++){var k=_[q];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(L,k.key,k)}}function U(L,_,q){return _&&W(L.prototype,_),q&&W(L,q),L}function N(L,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(_&&_.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),_&&F(L,_)}function F(L,_){return F=Object.setPrototypeOf||function(k,x){return k.__proto__=x,k},F(L,_)}function V(L){var _=A();return function(){var k=M(L),x;if(_){var I=M(this).constructor;x=Reflect.construct(k,arguments,I)}else x=k.apply(this,arguments);return B(this,x)}}function B(L,_){return _&&(y(_)==="object"||typeof _=="function")?_:Z(L)}function Z(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function M(L){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(q){return q.__proto__||Object.getPrototypeOf(q)},M(L)}function z(L,_){var q="data-clipboard-".concat(L);if(_.hasAttribute(q))return _.getAttribute(q)}var J=function(L){N(q,L);var _=V(q);function q(k,x){var I;return O(this,q),I=_.call(this),I.resolveOptions(x),I.listenClick(k),I}return U(q,[{key:"resolveOptions",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof x.action=="function"?x.action:this.defaultAction,this.target=typeof x.target=="function"?x.target:this.defaultTarget,this.text=typeof x.text=="function"?x.text:this.defaultText,this.container=y(x.container)==="object"?x.container:document.body}},{key:"listenClick",value:function(x){var I=this;this.listener=c()(x,"click",function(K){return I.onClick(K)})}},{key:"onClick",value:function(x){var I=x.delegateTarget||x.currentTarget,K=this.action(I)||"copy",he=T({action:K,container:this.container,target:this.target(I),text:this.text(I)});this.emit(he?"success":"error",{action:K,text:he,trigger:I,clearSelection:function(){I&&I.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(x){return z("action",x)}},{key:"defaultTarget",value:function(x){var I=z("target",x);if(I)return document.querySelector(I)}},{key:"defaultText",value:function(x){return z("text",x)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(x){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return R(x,I)}},{key:"cut",value:function(x){return b(x)}},{key:"isSupported",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],I=typeof x=="string"?[x]:x,K=!!document.queryCommandSupported;return I.forEach(function(he){K=K&&!!document.queryCommandSupported(he)}),K}}]),q}(l()),se=J},828:function(r){var o=9;if(typeof Element<"u"&&!Element.prototype.matches){var a=Element.prototype;a.matches=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector}function d(l,s){for(;l&&l.nodeType!==o;){if(typeof l.matches=="function"&&l.matches(s))return l;l=l.parentNode}}r.exports=d},438:function(r,o,a){var d=a(828);function l(u,p,m,g,b){var w=c.apply(this,arguments);return u.addEventListener(m,w,b),{destroy:function(){u.removeEventListener(m,w,b)}}}function s(u,p,m,g,b){return typeof u.addEventListener=="function"?l.apply(null,arguments):typeof m=="function"?l.bind(null,document).apply(null,arguments):(typeof u=="string"&&(u=document.querySelectorAll(u)),Array.prototype.map.call(u,function(w){return l(w,p,m,g,b)}))}function c(u,p,m,g){return function(b){b.delegateTarget=d(b.target,p),b.delegateTarget&&g.call(u,b)}}r.exports=s},879:function(r,o){o.node=function(a){return a!==void 0&&a instanceof HTMLElement&&a.nodeType===1},o.nodeList=function(a){var d=Object.prototype.toString.call(a);return a!==void 0&&(d==="[object NodeList]"||d==="[object HTMLCollection]")&&"length"in a&&(a.length===0||o.node(a[0]))},o.string=function(a){return typeof a=="string"||a instanceof String},o.fn=function(a){var d=Object.prototype.toString.call(a);return d==="[object Function]"}},370:function(r,o,a){var d=a(879),l=a(438);function s(m,g,b){if(!m&&!g&&!b)throw new Error("Missing required arguments");if(!d.string(g))throw new TypeError("Second argument must be a String");if(!d.fn(b))throw new TypeError("Third argument must be a Function");if(d.node(m))return c(m,g,b);if(d.nodeList(m))return u(m,g,b);if(d.string(m))return p(m,g,b);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function c(m,g,b){return m.addEventListener(g,b),{destroy:function(){m.removeEventListener(g,b)}}}function u(m,g,b){return Array.prototype.forEach.call(m,function(w){w.addEventListener(g,b)}),{destroy:function(){Array.prototype.forEach.call(m,function(w){w.removeEventListener(g,b)})}}}function p(m,g,b){return l(document.body,m,g,b)}r.exports=s},817:function(r){function o(a){var d;if(a.nodeName==="SELECT")a.focus(),d=a.value;else if(a.nodeName==="INPUT"||a.nodeName==="TEXTAREA"){var l=a.hasAttribute("readonly");l||a.setAttribute("readonly",""),a.select(),a.setSelectionRange(0,a.value.length),l||a.removeAttribute("readonly"),d=a.value}else{a.hasAttribute("contenteditable")&&a.focus();var s=window.getSelection(),c=document.createRange();c.selectNodeContents(a),s.removeAllRanges(),s.addRange(c),d=s.toString()}return d}r.exports=o},279:function(r){function o(){}o.prototype={on:function(a,d,l){var s=this.e||(this.e={});return(s[a]||(s[a]=[])).push({fn:d,ctx:l}),this},once:function(a,d,l){var s=this;function c(){s.off(a,c),d.apply(l,arguments)}return c._=d,this.on(a,c,l)},emit:function(a){var d=[].slice.call(arguments,1),l=((this.e||(this.e={}))[a]||[]).slice(),s=0,c=l.length;for(s;s<c;s++)l[s].fn.apply(l[s].ctx,d);return this},off:function(a,d){var l=this.e||(this.e={}),s=l[a],c=[];if(s&&d)for(var u=0,p=s.length;u<p;u++)s[u].fn!==d&&s[u].fn._!==d&&c.push(s[u]);return c.length?l[a]=c:delete l[a],this}},r.exports=o,r.exports.TinyEmitter=o}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}return function(){n.n=function(r){var o=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(o,{a:o}),o}}(),function(){n.d=function(r,o){for(var a in o)n.o(o,a)&&!n.o(r,a)&&Object.defineProperty(r,a,{enumerable:!0,get:o[a]})}}(),function(){n.o=function(r,o){return Object.prototype.hasOwnProperty.call(r,o)}}(),n(686)}().default})});window.ql={};function ue(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(e)}function me(e){return e.json()}function Si(e){return e.text()}ql.getJson=function(e){return fetch(e,{credentials:"include"}).then(ue).then(me)};ql.getHtml=function(e){return fetch(e,{credentials:"include"}).then(ue).then(Si)};ql.Poller=function(e,t,n,r){this.continuePolling=!0,this.path=e,this.timeout=t,this.success=n,this.failure=r||this.defaultFailure,this.start=function o(){this.continuePolling&&ql.getJson(this.path).then(this.success).then(()=>setTimeout(o.bind(this),this.timeout)).catch(a=>{console.log(a),this.stop(),this.failure(a)})},this.once=function(){ql.getJson(this.path).then(this.success).catch(this.failure)},this.stop=function(){this.continuePolling=!1},this.defaultFailure=function(o){console.log("Request failed",o)}};ql.events={};ql.subscribe=function(e,t){return ql.events[e]=ql.events[e]||[],ql.events[e].push(t),{unsubscibe:function(){let n=ql.events[e].indexOf(t);ql.events[e].splice(n,1)}}};ql.publish=function(e,t){ql.events[e]&&ql.events[e].forEach(function(n){n.call(this,t)})};ql.debounce=function(e,t=20,n=!0){var r;return function(){var o=this,a=arguments,d=function(){r=null,n||e.apply(o,a)},l=n&&!r;clearTimeout(r),r=setTimeout(d,t),l&&e.apply(o,a)}};ql.showFlash=function(e,t){let n=$("#flash-sibling-before"),r=$('<div id="flash-alert" class="alert" role="alert"></div>');e=="notice"?r.addClass("alert-success"):r.addClass("alert-error");let o=$('<a class="alert__close" data-dismiss="alert" aria-labelledby="flash-alert"><ql-icon icon="close" /></a>'),a=$('<iframe class="l-ie-iframe-fix" tabindex="-1"></iframe>');r.text(t),r.append(o),r.append(a),$(".alert").remove(),r.insertAfter(n)};ql.moveFlash=function(e){$(()=>$("#flash-sibling-before").insertAfter(e))};$.widget("custom.userAutocomplete",$.ui.autocomplete,{_renderItem:function(e,t){return $("<li>").attr("data-value",t.value).append(ql.renderAutocompleteUser(t)).appendTo(e)}});ql.renderAutocompleteUser=function(e){return e.value=="newUser"?`<div class="add-new-user js-add-new-user">
      <i class="material-icons">add</i> Add New User
    </div>`:`<div class='autocomplete--user'>
      <img src='https://secure.gravatar.com/avatar/${e.label.gravatar_hash}.jpg?s=80&d=mm'/>
      <div>
        ${e.label.email}
        <span>${e.label.first_name} ${e.label.last_name}</span>
      </div>
    </div>`};ql.autocomplete=function(){function e(){$(".js-user-autocomplete").userAutocomplete({source:t}),$(document).on("nested:fieldAdded",function(n){n.field.find(".js-user-autocomplete").userAutocomplete({source:t})})}function t(n,r){let o=`?q[${this.element[0].dataset.query}]=${n.term}`;ql.getJson(this.element[0].dataset.autocomplete+o).then(a=>{r(a.map(d=>({label:d,value:d.email})))})}return{init:e,source:t}}();ql.setCookie=function(e,t,n){var r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);var o="expires="+r.toUTCString();document.cookie=e+"="+t+";"+o+";path=/"};ql.track=function(e,t={}){typeof gtag<"u"&&gtag("event",e,t)};ql.experiments=function(){let e=[],t=document.querySelector('meta[name="active-experiments"]');if(t)try{e=JSON.parse(t.content)}catch(a){console.error(a)}else console.error("Missing active-experiments meta tag.");function n(a){return e.find(d=>d.id===a)}function r(){return e}function o(a){let d=n(a);return a!=null&&d.variant}return{getActiveExperiments:r,getExperiment:n,getUserVariant:o}}();var Yl=bn(yn());var xt={logger:self.console,WebSocket:self.WebSocket},X={log(...e){this.enabled&&(e.push(Date.now()),xt.logger.log("[ActionCable]",...e))}},it=()=>new Date().getTime(),kt=e=>(it()-e)/1e3,rt=class{constructor(t){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=t,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=it(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),X.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=it(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),X.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=it()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,X.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=it(),X.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){let{staleThreshold:t,reconnectionBackoffRate:n}=this.constructor,r=Math.pow(1+n,Math.min(this.reconnectAttempts,10)),a=(this.reconnectAttempts===0?1:n)*Math.random();return t*1e3*r*(1+a)}reconnectIfStale(){this.connectionIsStale()&&(X.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${kt(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?X.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${kt(this.disconnectedAt)} s`):(X.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return kt(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&kt(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(X.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}};rt.staleThreshold=6;rt.reconnectionBackoffRate=.15;var qn={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart",remote:"remote"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},{message_types:nt,protocols:Ht}=qn,$i=Ht.slice(0,Ht.length-1),wn=[].indexOf,ot=class{constructor(t){this.open=this.open.bind(this),this.consumer=t,this.subscriptions=this.consumer.subscriptions,this.monitor=new rt(this),this.disconnected=!0}send(t){return this.isOpen()?(this.webSocket.send(JSON.stringify(t)),!0):!1}open(){if(this.isActive())return X.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1;{let t=[...Ht,...this.consumer.subprotocols||[]];return X.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${t}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new xt.WebSocket(this.consumer.url,t),this.installEventHandlers(),this.monitor.start(),!0}}close({allowReconnect:t}={allowReconnect:!0}){if(t||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(X.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(t){X.log("Failed to reopen WebSocket",t)}finally{X.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}triedToReconnect(){return this.monitor.reconnectAttempts>0}isProtocolSupported(){return wn.call($i,this.getProtocol())>=0}isState(...t){return wn.call(t,this.getState())>=0}getState(){if(this.webSocket){for(let t in xt.WebSocket)if(xt.WebSocket[t]===this.webSocket.readyState)return t.toLowerCase()}return null}installEventHandlers(){for(let t in this.events){let n=this.events[t].bind(this);this.webSocket[`on${t}`]=n}}uninstallEventHandlers(){for(let t in this.events)this.webSocket[`on${t}`]=function(){}}};ot.reopenDelay=500;ot.prototype.events={message(e){if(!this.isProtocolSupported())return;let{identifier:t,message:n,reason:r,reconnect:o,type:a}=JSON.parse(e.data);switch(a){case nt.welcome:return this.triedToReconnect()&&(this.reconnectAttempted=!0),this.monitor.recordConnect(),this.subscriptions.reload();case nt.disconnect:return X.log(`Disconnecting. Reason: ${r}`),this.close({allowReconnect:o});case nt.ping:return this.monitor.recordPing();case nt.confirmation:return this.subscriptions.confirmSubscription(t),this.reconnectAttempted?(this.reconnectAttempted=!1,this.subscriptions.notify(t,"connected",{reconnected:!0})):this.subscriptions.notify(t,"connected",{reconnected:!1});case nt.rejection:return this.subscriptions.reject(t);default:return this.subscriptions.notify(t,"received",n)}},open(){if(X.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return X.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(e){if(X.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){X.log("WebSocket onerror event")}};var Ei=function(e,t){if(t!=null)for(let n in t){let r=t[n];e[n]=r}return e},Ft=class{constructor(t,n={},r){this.consumer=t,this.identifier=JSON.stringify(n),Ei(this,r)}perform(t,n={}){return n.action=t,this.send(n)}send(t){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(t)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}},Vt=class{constructor(t){this.subscriptions=t,this.pendingSubscriptions=[]}guarantee(t){this.pendingSubscriptions.indexOf(t)==-1?(X.log(`SubscriptionGuarantor guaranteeing ${t.identifier}`),this.pendingSubscriptions.push(t)):X.log(`SubscriptionGuarantor already guaranteeing ${t.identifier}`),this.startGuaranteeing()}forget(t){X.log(`SubscriptionGuarantor forgetting ${t.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(n=>n!==t)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(t=>{X.log(`SubscriptionGuarantor resubscribing ${t.identifier}`),this.subscriptions.subscribe(t)})},500)}},Ut=class{constructor(t){this.consumer=t,this.guarantor=new Vt(this),this.subscriptions=[]}create(t,n){let r=t,o=typeof r=="object"?r:{channel:r},a=new Ft(this.consumer,o,n);return this.add(a)}add(t){return this.subscriptions.push(t),this.consumer.ensureActiveConnection(),this.notify(t,"initialized"),this.subscribe(t),t}remove(t){return this.forget(t),this.findAll(t.identifier).length||this.sendCommand(t,"unsubscribe"),t}reject(t){return this.findAll(t).map(n=>(this.forget(n),this.notify(n,"rejected"),n))}forget(t){return this.guarantor.forget(t),this.subscriptions=this.subscriptions.filter(n=>n!==t),t}findAll(t){return this.subscriptions.filter(n=>n.identifier===t)}reload(){return this.subscriptions.map(t=>this.subscribe(t))}notifyAll(t,...n){return this.subscriptions.map(r=>this.notify(r,t,...n))}notify(t,n,...r){let o;return typeof t=="string"?o=this.findAll(t):o=[t],o.map(a=>typeof a[n]=="function"?a[n](...r):void 0)}subscribe(t){this.sendCommand(t,"subscribe")&&this.guarantor.guarantee(t)}confirmSubscription(t){X.log(`Subscription confirmed ${t}`),this.findAll(t).map(n=>this.guarantor.forget(n))}sendCommand(t,n){let{identifier:r}=t;return this.consumer.send({command:n,identifier:r})}},Wt=class{constructor(t){this._url=t,this.subscriptions=new Ut(this),this.connection=new ot(this),this.subprotocols=[]}get url(){return Li(this._url)}send(t){return this.connection.send(t)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}addSubProtocol(t){this.subprotocols=[...this.subprotocols,t]}};function Li(e){if(typeof e=="function"&&(e=e()),e&&!/^wss?:/i.test(e)){let t=document.createElement("a");return t.href=e,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href}else return e}function Sn(e=ki("url")||qn.default_mount_path){return new Wt(e)}function ki(e){let t=document.head.querySelector(`meta[name='action-cable-${e}']`);if(t)return t.getAttribute("content")}window.App=window.App||{};App.cable=Sn();App.cable.subscriptions.create("PresenceChannel");ql.adminClassroomView=function(){let e="",t="";function n(o){e=o,t=document.querySelector(".js-classroom-focuses"),r()}function r(){ql.getJson(e).then(o=>t.innerHTML=o.focuses).then(()=>setTimeout(r,1e4)).catch(o=>console.error(o.message))}return{init:n}}();ql.adminUser=function(){function e(){let t=document.getElementById("admin-user-blocked-checkbox"),n=document.getElementById("admin-user-blocked-reason-wrapper"),r=document.getElementById("admin-user-blocked-reason");t.addEventListener("change",()=>{n.classList.remove("not-visible"),r.value=""})}return{init:e}}();ql.analytics=function(){function e(){function n(r){for(let o of r.querySelectorAll("*"))o.dataset&&o.dataset.analyticsAction!=null&&o.addEventListener("click",t,!1),o.shadowRoot&&n(o.shadowRoot)}n(document)}function t(n){ql.track(this.dataset.analyticsAction,{category:this.dataset.analyticsCategory,label:this.dataset.analyticsLabel,...this.dataset})}return{init:e}}();ql.announcements=function(){return{switchPhase(e){let t=document.querySelectorAll(".announcement-phase");for(let[a,d]of t.entries())e===a?d.classList.remove("hidden"):d.classList.add("hidden");let n=document.querySelector(".view-message-audience");n?.classList.toggle("hidden",e===0);let r=`<strong>Subject:</strong> ${document.getElementById("announcement_title").value}`,o=`<strong>Message:</strong> ${document.getElementById("announcement_message").value}`;document.getElementById("announcement_preview_message").value=`${r}<br><br>${o}`},checkAllRecipients(){let e=document.getElementsByName("checkAll")[0].checked,t=document.getElementsByName("selected_memberships[]");for(let n of t)n.checked=e},checkSingleRecipient(){document.getElementsByName("checkAll")[0].checked&&(document.getElementsByName("checkAll")[0].checked=!1)},checkAcknowledgement(){let e=document.getElementById("send_button").disabled;document.getElementById("send_button").disabled=!e}}}();ql.assessmentTimer=function(){let n={RETAKE:"retake",SUBMIT:"submit"};function r(){let o=document.querySelector("ql-quiz"),a=document.querySelector("ql-exam-timer"),d=document.querySelector(".assessment-timer"),l=document.querySelector(".timer-toggle"),s=()=>{a.getAttribute("open")==null&&(a.setAttribute("open","true"),setTimeout(()=>a.removeAttribute("open"),5*1e3))},c=p=>{let m=p.detail,g=a.classList;m<=0&&!g.contains("expired")?(o.dispatchEvent(new Event("timeElapsed")),g.add("expired"),a.setAttribute("open","true")):m<=30&&!g.contains("critical")?(g.add("critical"),s()):m<15*60&&!g.contains("warning")&&(g.add("warning"),s())},u=p=>{switch(p.type){case n.RETAKE:a.resetForRetake(p.detail),a.classList.remove("expired","critical","warning"),d.classList.remove("hidden");break;case n.SUBMIT:a.startedAt=null,a.secondsRemaining=null,d.classList.add("hidden");break}};o&&a&&l&&(a.addEventListener("secondsRemainingChanged",c),o.addEventListener(n.SUBMIT,u),o.addEventListener(n.RETAKE,u))}return{init:r}}();ql.barkerLeaderboard=function(){function e(){document.addEventListener("avatarSelected",t=>{let{option:n}=t.detail;for(let r of document.querySelectorAll(".js-current-avatar"))r.src=n.src;$.post("select_avatar",{barker_avatar_slug:n.slug})})}return{init:e}}();ql.campaigns=function(){function e(){$("#campaign_wizard").length>0&&n(),$("#campaign_target_type").change(function(){n()}),$("input#campaign_events").change(()=>{t()}),$(".campaign_actions_form").on("nested:fieldAdded",r=>{r.target.className==="fields"&&t()})}function t(){$(document).find(".campaign_campaign_actions_event select").empty().append($("input#campaign_events").val().split(",").map(r=>`<option>${$.trim(r)}</option>`).join())}function n(){$("#campaign_target_lab_id").closest(".control-group").hide(),$("#campaign_target_learningpath_id").closest(".control-group").hide(),$("#campaign_target_coursetemplate_id").closest(".control-group").hide(),$("#campaign_target_type").val()=="LearningPath"?$("#campaign_target_learningpath_id").closest(".control-group").show():$("#campaign_target_type").val()=="Lab"?$("#campaign_target_lab_id").closest(".control-group").show():$("#campaign_target_type").val()=="CourseTemplate"&&$("#campaign_target_coursetemplate_id").closest(".control-group").show()}return{init:e}}();CampaignCodeModalSubmitEnable=function(){$("#campaign-code-modal-submit").prop("disabled",!1)};CampaignCodeModalSubmitDisable=function(){$("#campaign-code-modal-submit").prop("disabled",!0)};ql.catalogs={tracking:function(){function e(){document.querySelectorAll(".js-catalog-item-title a").forEach(n=>n.addEventListener("click",r=>{ql.track("clicked_catalog_list_item",{label:r.target.innerText,type:r.target.dataset.type})},!1))}return{init:e}}(),addItems:function(){$addButtons=[],$catalogItems={};function e(){$catalogItems=document.querySelector(".js-catalog-items"),$addButtons=document.querySelectorAll(".js-add-button"),$addButtons.forEach(o=>{o.addEventListener("click",t,!1)}),ql.subscribe("itemAdded",r)}function t(o){o.preventDefault(),o.stopImmediatePropagation(),$("#add_item_with_children").modal("hide"),n(this.href)}function n(o){fetch(o,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json","Content-Type":"application/json"})}).then(ue).then(me).then(a=>ql.publish("itemAdded",a)).catch(a=>console.log(a))}function r(o){$firstCatalogItem=$catalogItems.querySelectorAll(".js-catalog-item")[0],$firstCatalogItem?$firstCatalogItem.insertAdjacentHTML("beforebegin",o.html):$catalogItems.insertAdjacentHTML("beforeend",o.html),$visiblebuttons=$catalogItems.querySelectorAll(".js-item-visible"),$visiblebuttons.forEach(a=>{a.hasAttribute("data-listening")||ql.catalogs.editItems.upgradeVisibleButton(a)}),$priceFields=$catalogItems.querySelectorAll(".js-item-price"),$priceFields.forEach(a=>{a.hasAttribute("data-listening")||ql.catalogs.editItems.upgradePriceField(a)}),$oldItem=document.querySelector(`.js-add-item[data-item="${o.catalogableType}_${o.catalogableId}"]`),$($oldItem).animate({height:0},200,()=>{$oldItem.remove()})}return{init:e,addItem:n}}(),searchItems:function(){function e(){$active=window.localStorage.getItem("searchTab")?window.localStorage.getItem("searchTab"):"Labs",t(".js-tab"),t(".js-tab-content"),n(),$tabsContainer=document.querySelector(".js-catalogable-types"),$tabsContainer.addEventListener("click",r)}function t(o){$tabs=document.querySelectorAll(o),$tabs.forEach(a=>{a&&(a.dataset.tab==$active?a.classList.add("is-active"):a.classList.remove("is-active"))})}function n(){$paginationContainers=document.querySelectorAll(".pagination"),$paginationContainers.forEach(o=>{o&&(o.id!=$active.toLowerCase()?o.style.display="none":o.style.display="inline")})}function r(o){$active=document.querySelector(".js-tab.is-active").dataset.tab,window.localStorage.setItem("searchTab",$active),n()}return{init:e}}(),dragAndDrop:function(){$addItems={},$modal={},$name={},$type={},$count={},$with_button={},$without_button={};function e(){$modal=document.querySelector("#add_item_with_children"),$name=$modal.querySelector(".js-add-item-name"),$type=$modal.querySelector(".js-add-item-type"),$count=$modal.querySelector(".js-add-item-children-count"),$with_button=$modal.querySelector(".js-with-children"),$without_button=$modal.querySelector(".js-without-children"),$(".js-add-item").draggable({helper:"clone",appendTo:"body"}),$(".js-catalog-table").droppable({drop:t,activeClass:"is-droppable",hoverClass:"is-active"})}function t(n,r){let o=r.draggable[0];if(o.dataset.hasChildren){let a=o.dataset.name,d=o.dataset.type,l=o.dataset.children,s=o.querySelector(".js-add-with-children").href,c=o.querySelector(".js-add-without-children").href;$name.innerHTML=a,$type.innerHTML=d,$count.innerHTML=l,$with_button.href=s,$without_button.href=c,$("#add_item_with_children").modal("show")}else $addButton=o.querySelector(".js-add-button"),ql.catalogs.addItems.addItem($addButton.href)}return{init:e}}(),editItems:function(){$catalogItems={},$visibleButtons={},$priceFields={};function e(){$catalogItems=document.querySelector(".js-catalog-items"),$visibleButtons=$catalogItems.querySelectorAll(".js-item-visible"),$visibleButtons.forEach(t),$priceFields=$catalogItems.querySelectorAll(".js-item-price"),$priceFields.forEach(n),ql.subscribe("itemUpdated",d)}function t(l){l.addEventListener("click",r,!1),l.dataset.listening="true"}function n(l){l.addEventListener("change",o,!1),l.dataset.listening="true"}function r(l){l.preventDefault(),l.stopImmediatePropagation(),a(this.href)}function o(l){let s=this.dataset.path.replace(/=.*/i,`=${this.value}`);a(s)}function a(l){fetch(l,{method:"PATCH",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json","Content-Type":"application/json"})}).then(ue).then(me).then(s=>ql.publish("itemUpdated",s)).catch(s=>console.log(s))}function d(l){$item=$catalogItems.querySelector(`[data-item = "${l.id}"]`),$visibleButton=$item.querySelector(".js-item-visible");let s=l.visible?"0":"1",c=l.visible?"text--success":"text--light",u=$visibleButton.href.replace(/=\d/i,`=${s}`);$visibleButton.href=u,$visibleButton.classList.remove("text--success"),$visibleButton.classList.remove("text--light"),$visibleButton.classList.add(c),l.price&&($priceField=$item.querySelector(".js-item-price"),$priceField.value=l.price)}return{init:e,upgradeVisibleButton:t,upgradePriceField:n}}(),edit:function(){$enableButton={},$enableIcon={},$fraudButton={},$fraudIcon={};function e(){$enableButton=document.querySelector(".js-enable-catalog"),$enableIcon=$enableButton.querySelector(".material-icons"),$enableButton.addEventListener("click",t,!1),$fraudButton=document.querySelector(".js-fraud-catalog"),$fraudIcon=$fraudButton.querySelector(".material-icons"),$fraudButton.addEventListener("click",t,!1),ql.subscribe("catalogUpdated",r)}function t(o){o.preventDefault(),o.stopImmediatePropagation(),n(this.href)}function n(o){fetch(o,{method:"PATCH",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json","Content-Type":"application/json"})}).then(ue).then(me).then(a=>ql.publish("catalogUpdated",a)).catch(a=>console.log(a))}function r(o){let a=o.enabled_at?"0":"1",d=o.enabled_at?"check_box":"check_box_outline_blank",l=$enableButton.href.replace(/=\d/i,`=${a}`);$enableButton.href=l,$enableIcon.innerHTML=d;let s=o.fraud_protection?"0":"1",c=o.fraud_protection?"check_box":"check_box_outline_blank",u=$fraudButton.href.replace(/=\d/i,`=${s}`);$fraudButton.href=u,$fraudIcon.innerHTML=c}return{init:e}}(),description:function(){function e(t,n,r){document.getElementById(t).checked?document.getElementById(`label_${t}`).innerHTML=n:document.getElementById(`label_${t}`).innerHTML=r}return{checkboxState:e}}()};ql.catalogAccessBulkRemoval=function(e){let t="received-dry-run-status",n="received-removal-status",r,o;function a(){document.querySelector(".js-start-dry-run").addEventListener("click",w),ql.subscribe(t,u),ql.subscribe(n,p)}function d(A){f(),l(A)}function l(A){r=new ql.Poller(A,e,M=>{ql.publish(t,M)}),r.start()}function s(A){y(),c(A)}function c(A){o===void 0&&(o=new ql.Poller(A,e,M=>{ql.publish(n,M)}),o.start())}function u(A){if(A&&A.dry_run_operation===null){window.location=A.redirect_path;return}A&&A.dry_run_operation.status==="finished"&&(r.stop(),T(),A.dry_run_operation.succeeded?g(A):V())}function p(A){if(A&&A.removal_operation===null){window.location=A.redirect_path;return}A&&A.removal_operation.status==="finished"&&(o.stop(),O(),A.removal_operation.succeeded?window.location=A.redirect_path:m())}function m(){document.querySelector(".removal-dry-run-summary").classList.contains("is-active")?N():V()}function g(A){let M=document.querySelector(".removal-dry-run-summary");M.innerHTML=A.rendered,b(),document.querySelector(".removal-dry-run-summary").classList.add("is-active"),B()}function b(){document.querySelector(".js-confirm-removal-button").addEventListener("click",E),document.querySelector(".js-cancel-bulk-removal").addEventListener("click",P),$confirmButtonForm=$(".js-confirm-removal-form"),$confirmButtonForm.on("ajax:success",(z,J)=>{C(),c(`${J.removal_status_path}?removal_operation_id=${J.removal_operation_id}`)}),$confirmButtonForm.on("ajax:error",(z,J)=>(window.location=J.responseJSON.redirect_path,!1))}function w(){f(),R()}function E(A){U(),F()}function P(){W(),R(),C()}function R(){r&&(r.stop(),r=void 0)}function C(){o&&(o.stop(),o=void 0)}function f(){document.querySelector(".dry-run-loader").classList.add("is-active"),document.querySelector(".removal-general-error").classList.remove("is-active"),B()}function T(){document.querySelector(".dry-run-loader").classList.remove("is-active")}function y(){document.querySelector(".removal-loader").classList.add("is-active"),B()}function O(){document.querySelector(".removal-loader").classList.remove("is-active")}function W(){document.querySelector(".removal-dry-run-summary").classList.remove("is-active"),Z()}function U(){document.querySelector(".removal-spinner").classList.add("is-active"),document.querySelector(".removal-actions").classList.add("disabled")}function N(){document.querySelector(".removal-confirmation-error").classList.add("is-active"),document.querySelector(".removal-spinner").classList.remove("is-active"),document.querySelector(".removal-actions").classList.remove("disabled")}function F(){document.querySelector(".removal-confirmation-error").classList.remove("is-active")}function V(){document.querySelector(".removal-general-error").classList.add("is-active"),Z()}function B(){document.querySelector(".removal-upload-form").classList.add("disabled")}function Z(){document.querySelector(".removal-upload-form").classList.remove("disabled")}return{init:a,pollDryRunOnPageLoad:d,pollRemovalOnPageLoad:s}};ql.chat=function(){function e(){o(),zE("messenger:on","close",n)}function t(){r(),zE("messenger","open")}function n(){zE("messenger","close"),o()}function r(){zE("messenger","show")}function o(){zE("messenger","hide")}return{init:e,open:t,close:n,show:r,hide:o}}();ql.processCheckout=function(){$toast="",$toastMessage="",$toastLoader="",$redirectPath="",poller={};function e(o){$toast=document.querySelector(".js-toast"),$toastMessage=document.querySelector(".js-toast-message"),$toastLoader=$toast.querySelector(".mdl-js-progress"),$redirectPath=o,ql.subscribe("received-checkout-status",r)}function t(o){poller=new ql.Poller(o,1e3,n),poller.start()}function n(o){ql.publish("received-checkout-status",o)}function r(o){let a=JSON.parse(o.result);o.status==="finished"?(poller.stop(),$toastLoader.classList.remove("is-visible"),!o.succeeded||a&&a.error?($toast.classList.remove("is-visible"),ql.showFlash("warn",a.error)):window.location.replace($redirectPath)):$toastLoader.classList.contains("is-visible")||$toastLoader.classList.add("is-visible")}return{init:e,poll:t}}();initChosenListener=function(){$(".js-chosen").chosen({disable_search_threshold:20})};initChosen=function(){initChosenListener()};ql.focusDataPath="";ql.initStudentCheckBoxListeners=function(){[...document.querySelectorAll(".js-select-student")].map(t=>{t.addEventListener("click",ql.handleStudentCheckBox)})};ql.handleStudentCheckBox=function(){ql.toggleStudentRow(this.closest("[data-student]")),ql.toggleStudentCheckBox(this),ql.toggleActionButtons()};ql.toggleStudentRow=function(e){e.classList.toggle("is-selected")};ql.toggleStudentCheckBox=function(e){e.innerHTML=e.innerHTML.includes("blank")?"check_box":"check_box_outline_blank"};ql.toggleActionButtons=function(){let e=ql.getSelectedStudentRows(),t=e.filter(a=>a.dataset.running=="true"),n=document.querySelector(".js-student-table-title"),r=document.querySelector(".js-student-actions-container"),o=r.querySelectorAll(".mdl-button");e.length?(n.style.display="none",r.style.display="block",t.length==0?o.forEach(a=>a.classList.add("mdl-button--disabled")):o.forEach(a=>a.classList.remove("mdl-button--disabled"))):(n.style.display="flex",r.style.display="none")};ql.getSelectedStudentRows=function(){return[...document.querySelectorAll("[data-student]")].filter(t=>t.classList.contains("is-selected"))};ql.initAddTimeListener=function(){document.querySelector(".js-add-time").addEventListener("click",ql.handleAddTime)};ql.handleAddTime=function(){ql.getSelectedStudentRows().filter(n=>n.dataset.running=="true").map(n=>n.dataset.addTimePath).map(n=>{let r=new Request(n,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content})});fetch(r).then(status).then(json).then(()=>ql.getJson(ql.focusDataPath).then(o=>ql.publish("received-focus-data",o))).catch(o=>console.log("Request failed",o))})};ql.initEndLabListener=function(){document.querySelector(".js-end-lab").addEventListener("click",ql.handleEndLab)};ql.handleEndLab=function(){ql.getSelectedStudentRows().filter(n=>n.dataset.running=="true").map(n=>n.dataset.endLabPath).map(n=>{fetch(n,{credentials:"include"}).then(status).then(json).then(()=>ql.getJson(ql.focusDataPath).then(r=>ql.publish("received-focus-data",r))).catch(r=>console.log("Request failed",r))})};ql.trainerClassroomView=function(){let e={},t={};function n(l){l.students.forEach(s=>{let c=document.querySelector(`[data-student="${s.id}"]`);c.dataset.labInstance=s.lab_instance.id,c.dataset.labState=s.lab_instance.lab_state,c.dataset.running=s.lab_instance.running,c.dataset.addTimePath=s.lab_instance.add_time_path,c.dataset.endLabPath=s.lab_instance.end_lab_path;let u=c.querySelector(".js-status");if(u.innerHTML=s.lab_instance.status_html,s.lab_instance.score_html){let p=c.querySelector(".js-score");p.innerHTML=s.lab_instance.score_html}})}function r(l){l.running_hotlabs&&l.running_hotlabs.forEach(s=>{let u=document.querySelector(`#focus_${s.id}`).querySelector(".js-lab-details");s.hotlabs_running_count>0?u.innerHTML=`${s.hotlabs_running_count} labs pre-warmed.`:u.innerHTML=""})}function o(l){e&&(e.innerHTML=l.hotlabs_status)}function a(l){if(t){t.innerHTML=l.hotlabs_button;let s=t.querySelectorAll(".mdl-button");for(let u of s)componentHandler.upgradeElement(u);let c=t.querySelectorAll(".mdl-tooltip");for(let u of c)componentHandler.upgradeElement(u)}}function d(){ql.getJson(ql.focusDataPath).then(l=>ql.publish("received-focus-data",l)).then(()=>setTimeout(d,5e3)).catch(l=>console.log("Request failed",l))}return{init:function(l){ql.focusDataPath=l,e=document.querySelector(".js-hotlabs"),t=document.querySelector(".js-hotlabs-button"),ql.subscribe("received-focus-data",o),ql.subscribe("received-focus-data",a),ql.subscribe("received-focus-data",r),ql.subscribe("received-focus-data",n),d(),document.querySelector("a.classroom__index-item.active").scrollIntoView()}}}();ql.trainerLabDragDrop=function(){function e(){$("#js-sortable").sortable({axis:"y",handle:".handle",update:function(){if($.post($(this).data("update-url"),$(this).sortable("serialize")),document.querySelectorAll(".classroom_section.visible").length>0)for(var t=document.querySelectorAll(".classroom_section.visible #classroom-table tr.focus.classroom-tr .number_field"),n=0;n<t.length;n++)t[n].innerText=n+1+"."}})}return{init:e}}();ql.classroomStudentView=function(){let e="",t="";function n(a){e=a,t=document.querySelectorAll(".js-focus-row"),ql.subscribe("received-student-data",o),r()}function r(){ql.getJson(e).then(a=>ql.publish("received-student-data",a)).then(()=>setTimeout(r,5e3)).catch(a=>console.log("Request failed",a))}function o(a){a.focuses.forEach(d=>{let l=[...t].filter(s=>s.dataset.focus==d.id).shift();l.innerHTML=d.html})}return{init:n}}();ql.cloudTerminal=function(){function e(t){let n=document.querySelector("#embedded-resource");n!==null&&n.src!==t&&(n.src=t)}return{update(t){if(t===null)return;if(new URL(t).host.endsWith(".qwiklabs.com"))e(t);else throw"studentUrl must be on a subdomain of qwiklabs.com: "+t},reset(){e("about:blank")},isTerminalActive(){let t=document.querySelector("#embedded-resource");return t!==null&&t.src!==""&&t.src!=="about:blank"}}}();ql.collaboratorsEdit=function(){$collaboratorList="",$errorFeedback="";function e(){$collaboratorList=$(".js-collaborator-list"),$errorFeedback=$(".js-add-collaborator-error"),t(),n()}function t(){$(".js-add-collaborator-form").on("ajax:before",function(){$errorFeedback.empty()}).on("ajax:success",function(a,d,l,s){r(d.rendered)}).on("ajax:error",function(a,d,l,s){o(d.responseJSON)})}function n(){$(document).on("ajax:success",".js-collaborator-item",function(a,d,l,s){a.currentTarget.remove(),a.preventDefault()}).on("ajax:error",".js-delete-permission",function(a,d,l,s){o(d.responseJSON)})}function r(a){$collaboratorList.append(a),$collaboratorList.scrollTop($collaboratorList[0].scrollHeight),$collaboratorList.find(".mdl-list__item").last().addClass("is-new")}function o(a){errors=a.errors,errors.forEach(function(d){$errorFeedback.append("<p>"+d+"</p>")})}return{init:e}}();ql.course={schedule:function(){let e,t;function n(){e=document.querySelectorAll(".js-more-details"),t=document.querySelectorAll(".js-less-details"),e.forEach(a=>{a.addEventListener("click",r,!1)}),t.forEach(a=>{a.addEventListener("click",o,!1)})}function r(a){a.preventDefault(),this.style.display="none",this.parentElement.querySelector(".js-less-details").style.display="block"}function o(a){a.preventDefault(),this.style.display="none",this.parentElement.querySelector(".js-more-details").style.display="block"}return{init:n}}()};ql.course_builder=function(){poller={},$progress_bar={},$error_message={},$success_message={},$course_template_link={};function e(){$progress_bar=document.getElementById("course_import_progress_bar"),$error_message=document.getElementById("error_message"),$success_message=document.getElementById("success_message"),$course_template_link=document.getElementById("course_template_link"),ql.subscribe("received-import-operation-status",a)}function t(s){poller=new ql.Poller(s,2e4,r,o),poller.start()}function n(s){s.loading="true"}function r(s){ql.publish("received-import-operation-status",s)}function o(s){console.log("Request failed",s)}function a(s){s.operation.status==="finished"&&poller.stop(),$progress_bar.progress=s.progress,s.has_errors&&$error_message.classList.add("found"),!s.has_errors&&s.progress===1&&s.path&&($success_message.classList.add("found"),$course_template_link.href=s.path)}function d(s,c,u){s.preventDefault();let p=document.getElementById("preview_url"),m="https://docs.google.com/spreadsheets/d/";u==="doc"&&(m="https://docs.google.com/document/d/"),p.href=c.value,(c.value||"").startsWith(m)?p.disabled=!1:p.disabled=!0}function l(s){let c=document.querySelector(`#${s}`);c.checkValidity()?c.submit():c.reportValidity()}return{init:e,poll:t,set_preview:d,submit_form:l,loading_button:n}}();ql.course_survey=function(){window.addEventListener("keydown",function(e){["ArrowUp","ArrowDown"].indexOf(e.code)>-1&&e.view.event.preventDefault()},!1)};ql.datePicker=function(){function e(t){let n=t.split("_")[0];$(".date-picker").flatpickr({locale:n}),$(".date-picker-clear").click(function(r){let o=document.getElementById(r.target.dataset.target);o&&o._flatpickr&&o._flatpickr.clear()})}return{init:e}}();ql.dashboardable=function(e){$.each(e,function(t,n){let r=t+"_spinner";$("#"+r).show(),$.get(window.location.href+n).done(function(o){$("#"+t).attr("data",JSON.stringify(o))}).fail(function(o){console.error("Failed to fetch popular data",o)}).always(function(){$("#"+r).hide()})})};ql.discovery=function(){function e(){t(".in-progress-cards .js-content-card","in-progress"),t(".favorite-cards .js-content-card","favorite"),t(".curated-cards .js-content-card","curated"),t(".featured-cards .js-content-card","featured"),t(".upcoming-cards .js-content-card","upcoming"),t(".popular-cards .js-content-card","popular")}function t(n,r){document.querySelectorAll(n).forEach(o=>{o.addEventListener("click",()=>{let{id:a,name:d,type:l,level:s,path:c}=o.dataset;ql.track("discover_catalog_item",{label:r,id:a,name:d,type:l,level:s,path:c})})})}return{init:e}}();ql.editV2Lab=function(){return{gdoc_or_markdown(e){e=="Google Doc"?(document.querySelector(".instructions_google_doc").style.display="block",document.querySelector(".instructions_markdown").style.display="none"):(document.querySelector(".instructions_google_doc").style.display="none",document.querySelector(".instructions_markdown").style.display="block")},switch_resource(e){e=="video"||e=="link"?(document.querySelector(".resource_video_link").style.display="block",document.querySelector(".resource_file").style.display="none"):(document.querySelector(".resource_video_link").style.display="none",document.querySelector(".resource_file").style.display="block")},switch_lab_resource(e,t){let n=document.getElementById("lab_lab_resources_attributes_0_resource_type"),r=document.querySelector("#lab_resource_variant"),o=r.options;if(Array.from(o).forEach(l=>l.remove(r)),JSON.parse(n.getAttribute("data-variants"))[e].forEach((l,s)=>{if(!(e=="gcp_project"&&(l=="gcpedu"||l=="gcpasl"))){let c=document.createElement("option");c.text=l,r.options.add(c),(l==t||t=="nil"&&s==0)&&(c.selected=!0)}}),e=="gcp_project"||e=="aws_account"){let l=document.querySelector("#resource_config_allowed_locations"),s=l.options;if(l.tagName=="SELECT"){Array.from(s).forEach(p=>p.remove(l));let c=JSON.parse(n.getAttribute("data-allowed-locations"));JSON.parse(n.getAttribute("data-all-allowed-locations"))[e].forEach(p=>{let m=document.createElement("option");m.text=p,l.options.add(m)}),$(document).find("#resource_config_allowed_locations").val(c).trigger("chosen:updated")}}resource_display_settings={gcp_project:{show_script:!0,show_script_custom_properties:!0,show_custom_ssh:!0,show_allow:!0,show_constraint:!0},linux_terminal:{show_script:!0},windows_vm:{show_script:!0},ide:{show_script:!0,show_student:!0},gcp_user:{show_roles_projects:!0},aws_account:{show_script:!0,show_policy:!0,show_allow:!0},google_workspace_domain:{},looker_instance:{show_script:!0,show_looker_cloud_roles:!0},cloud_terminal:{show_script:!0,show_looker_cloud_roles:!0},azure_resource_group:{show_script:!0,show_script_custom_properties:!0},azure_user:{show_roles_resource_groups:!0},jupyter_notebook:{show_script:!0,show_student:!0}},d(resource_display_settings[e]);function d({show_script:l=!1,show_script_custom_properties:s=!1,show_student:c=!1,show_custom_ssh:u=!1,show_roles_projects:p=!1,show_roles_resource_groups:m=!1,show_looker_cloud_roles:g=!1,show_policy:b=!1,show_allow:w=!1,show_constraint:E=!1}={}){let P=document.querySelector(".script_fields"),R=P.querySelectorAll("input"),C=document.querySelector(".student_files_fields"),f=C.querySelectorAll("input"),T=document.querySelectorAll(".custom_fields"),y=Array.from(T).reduce((_,q)=>_.concat(Array.from(q.querySelectorAll("input")),Array.from(q.querySelectorAll("select"))),[]),O=document.querySelector(".ssh_key_user"),W=O.querySelector("select"),U=document.querySelector(".allowed_locations"),N=U.querySelector("select"),F=document.querySelector(".allowed_locations_constraint"),V=F.querySelector("select"),B=document.querySelector("#roles_fields_project"),Z=[].concat(Array.from(B.querySelectorAll("input")),Array.from(B.querySelectorAll("select"))),A=document.querySelector("#roles_fields_resource_group"),M=[].concat(Array.from(A.querySelectorAll("input")),Array.from(A.querySelectorAll("select"))),z=document.querySelector(".looker_cloud_roles_fields"),J=[].concat(Array.from(z.querySelectorAll("input")),Array.from(z.querySelectorAll("select"))),se=document.querySelectorAll(".policy_fields"),L=Array.from(se).reduce((_,q)=>_.concat(Array.from(q.querySelectorAll("input")),Array.from(q.querySelectorAll("textarea"))),[]);P.style.display=l?"block":"none",R.forEach(_=>_.disabled=!l),C.style.display=c?"block":"none",f.forEach(_=>_.disabled=!c),T.forEach(_=>_.style.display=s?"block":"none"),y.forEach(_=>_.disabled=!s),O.style.display=u?"block":"none",W.disabled=!u,B.style.display=p?"block":"none",Z.forEach(_=>_.disabled=!p),A.style.display=m?"block":"none",M.forEach(_=>_.disabled=!m),z.style.display=g?"block":"none",J.forEach(_=>_.disabled=!g),se.forEach(_=>_.style.display=b?"block":"none"),L.forEach(_=>_.disabled=!b),U.style.display=w?"block":"none",N&&(N.disabled=!w),F.style.display=E?"block":"none"}},hide_document(e){script=document.getElementById(e),script&&(script.style.display="none")},update_script_state(e,t,n){let r=document.getElementById(e);if(r.value=t,ql.editV2Lab.hide_document(n),e.includes("student_files_")&&!document.getElementById("lab_lab_resources_attributes_0_student_files").value){let a=Array.from(document.getElementById("student_files").children).filter(d=>d.type=="hidden");document.getElementById("resource_config_student_files_all").value=a.reduce((d,l)=>d||l.value=="true",!1)}},add_custom_properties(e){let t=document.createElement("div");t.className="form-row";let n=Date.now(),r=`${e}_custom_property_${n}`;t.setAttribute("id",r);let o=document.createElement("div");o.classList.add("control-group","text");let a=document.createElement("Label");a.className="label",a.setAttribute("for","key"),a.innerHTML="Key";let d=document.createElement("input");d.className="input",d.setAttribute("id","key"),d.setAttribute("required",!0),d.setAttribute("name",`resource_config[${e}_custom_properties][${n}][key]`),o.appendChild(a),o.appendChild(d);let l=document.createElement("div");l.classList.add("control-group","text");let s=document.createElement("Label");s.className="label",s.setAttribute("for",`resource_config_${e}_custom_properties_${n}_value`),s.innerHTML="Reference / Value";let c=document.createElement("Select"),u=document.getElementById("lab_lab_resources_attributes_0_start_script");JSON.parse(u.getAttribute("data-options")).forEach(T=>{let y=document.createElement("option");y.text=T,c.appendChild(y)});let m=`resource_config[${e}_custom_properties][${n}][value]`,g=`resource_config_${e}_custom_properties_${n}_value`;c.className="input",c.setAttribute("id",g),c.setAttribute("required",!0),c.setAttribute("name",m),l.appendChild(s),l.appendChild(c);let b=document.createElement("div");b.classList.add("control-group","text");let w=document.createElement("Label");w.className="label",w.setAttribute("for","property_type"),w.innerHTML="Type";let E=document.createElement("Select");E.className="input",E.setAttribute("id","property_type"),E.setAttribute("name",`resource_config[${e}_custom_properties][${n}][type]`),E.setAttribute("onchange",`ql.editV2Lab.switch_custom_property_type('${g}', '${m}', this.value)`);let P=document.createElement("option");P.text="reference",E.appendChild(P);let R=document.createElement("option");R.text="value",E.appendChild(R),b.appendChild(w),b.appendChild(E);let C=document.createElement("ql-icon-button");C.setAttribute("onclick",`ql.editV2Lab.delete_element('${r}')`),C.setAttribute("icon","delete"),C.classList.add("link--danger"),t.appendChild(o),t.appendChild(l),t.appendChild(b),t.appendChild(C),document.getElementById(`${e}_add_custom_property`).before(t)},delete_element(e){let t=document.getElementById(e);t.parentNode.removeChild(t)},set_duration(e,t,n){let r=document.getElementById(e),o=document.getElementById(t),a=document.getElementById(n);a.value=o.value*60||r.value*60*1.5},switch_positions(e,t){let r=document.querySelector(".edit_lab").querySelectorAll("form > .fields");r.forEach((o,a)=>o.children[2].value=a);for(let o=0;o<r.length;o+=1)if(r[o].querySelector(`#lab_environment_outputs_attributes_${e}_position`)!=null){if(o==0&&t==-1||o==r.length-1&&t==1)break;r[o].children[2].value=o+t,r[o+t].children[2].value=o,t==-1?r[o].parentNode.insertBefore(r[o],r[o+t]):t==1&&r[o].parentNode.insertBefore(r[o+t],r[o]);break}},add_output(e){document.getElementById("add_output_button").click();let r=document.querySelector(".edit_lab").querySelectorAll("form > .fields"),o=r[r.length-1].querySelector(".lab_environment_outputs_reference").querySelector("input");o.value=e},switch_step_positions(e,t){let r=document.querySelector(".edit_assessment_manual").getElementsByClassName("fields"),a=document.querySelector("table").querySelectorAll("tr");for(let d=0;d<r.length;d+=1)if(r[d].querySelector(`#assessment_manual_steps_attributes_${e}_step_no`)!=null){if(d==0&&t==-1||d==r.length-1&&t==1)break;r[d].children[1].value=d+1+t,r[d+t].children[1].value=d+1,a[d+1].children[0].innerHTML=d+1+t,a[d+1+t].children[0].innerHTML=d+1,t==-1?(r[d].parentNode.insertBefore(r[d],r[d+t]),a[d+1].parentNode.insertBefore(a[d+1],a[d+1+t])):t==1&&(r[d].parentNode.insertBefore(r[d+t],r[d]),a[d+1].parentNode.insertBefore(a[d+1+t],a[d+1]));break}},add_student_message(e){let t=document.createElement("div");t.classList.add("form-row","form-row--max_width");let n=Date.now(),r=`student_message_${n}`;t.setAttribute("id",r);let o=document.createElement("div");o.classList.add("control-group","text");let a=document.createElement("Label");a.className="label",a.setAttribute("for",`locales[${e}][${n}][message_id]`),a.innerHTML="Message Id",o.appendChild(a);let d=document.createElement("Input");d.className="input",d.setAttribute("id",`locales[${e}][${n}][message_id]`),d.setAttribute("name",`locales[${e}][${n}][message_id]`),d.setAttribute("required",!0),o.appendChild(d),t.appendChild(o);let l=document.createElement("div");l.classList.add("control-group","text");let s=document.createElement("Label");s.className="label",s.setAttribute("for",`locales[${e}][${n}][message]`),s.innerHTML="Message",l.appendChild(s);let c=document.createElement("Input");c.className="input",c.setAttribute("id",`locales[${e}][${n}][message]`),c.setAttribute("name",`locales[${e}][${n}][message]`),c.setAttribute("required",!0),l.appendChild(c),t.appendChild(l);let u=document.createElement("ql-icon-button");u.setAttribute("onclick",`ql.editV2Lab.delete_element('${r}')`),u.setAttribute("icon","delete"),u.classList.add("text--error"),t.appendChild(u),document.getElementById("add-student-message").before(t)},add_default_outputs(){let e=document.getElementById("default_button"),t=document.getElementById("add_output_button"),n={console_url:1,username:2,password:3,project_id:4},r={console_url:console_url_label,username:username_label,password:password_label,project_id:project_id_label},o=JSON.parse(e.getAttribute("data-options"));o.sort((a,d)=>{let l=a.split(".")[1],s=d.split(".")[1],c=n[l]||5,u=n[s]||5;return c-u}),o.forEach(a=>{let d=a.split(".")[1];if(Object.keys(n).includes(d)){t.click();let l=document.querySelector(".edit_lab"),s=l.querySelectorAll("form > .fields"),c=l.querySelectorAll("textarea"),u=s[s.length-1].querySelector(".lab_environment_outputs_reference").querySelector("input");u.value=a;let p=c[c.length-1];p.value=r[d]}})},switch_custom_property_type(e,t,n){let r=document.getElementById(e),o=null;if(n=="value")o=document.createElement("input");else if(n=="reference"){let a=document.getElementById("lab_lab_resources_attributes_0_start_script"),d=JSON.parse(a.getAttribute("data-options"));o=document.createElement("Select"),d.forEach(l=>{let s=document.createElement("option");s.text=l,o.appendChild(s)})}o!=null&&(o.className="input",o.setAttribute("id",e),o.setAttribute("required",!0),o.setAttribute("name",t),r.parentNode.insertBefore(o,r),r.parentNode.removeChild(r))}}}();ql.exam=function(){function e(){setInterval(()=>{$.get(`${window.location.pathname}/status`).fail(()=>window.location.reload())},5e3),document.querySelector("ql-quiz").addEventListener("submit",()=>window.location.reload())}return{init:e}}();ql.favoriting=function(){function e(){document.querySelectorAll(".js-favorite-button").forEach(d=>{d.addEventListener("click",t,!1)})}function t(a){a.preventDefault(),a.stopImmediatePropagation(),n.call(this),o.call(this)}function n(){let a=r(this.dataset.type),d=this.dataset.name;this.href.includes("unfavorite")?ql.track("clicked_unfavorite_button",{type:a,label:d}):ql.track("clicked_favorite_button",{type:a,label:d})}function r(a){let d;switch(a){case"CatalogItem":d="Lab";break;case"ClassroomTemplate":d="Course";break;default:d=a}return d}function o(){let a=new Request(this.href,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content})});fetch(a).then(ue).then(me).then(d=>{if(console.log(d),d.alert)console.error(d.alert);else{this.setAttribute("href",d.path),this.setAttribute("tip",d.tooltip),this.setAttribute("aria-label",d.tooltip),this.innerHTML=d.icon;let l=document.getElementById(this.for);l&&(this.tip.toLowerCase().includes("add")?l.style.display="none":l.style.display="inline-block"),$card=this.closest(".js-content-card"),$card&&$card.classList.toggle("is-unfavorited")}})}return{init:e}}();ql.filter={filter:function(){$form={};function e(){$form=document.querySelector(".js-filter-form"),$form&&($inputs=$form.querySelectorAll("input"),$inputs.forEach(a=>a.addEventListener("click",t)))}function t(a){let d="any",l=a.currentTarget.closest(".js-list-item"),s=l.querySelector(`input[value="${d}"]`);a.currentTarget.value===d?l.querySelectorAll(`input:checked:not([value="${d}"])`).forEach(u=>{o(u)}):s.checked&&o(s),l.querySelectorAll("input:checked").length||r(s),numActive=l.querySelectorAll(`input:checked:not([value="${d}"])`).length;let c=numActive?`(${numActive})`:"";l.querySelector(".active-filter-number").textContent=c,ql.track(this.checked?"checked_filter":"unchecked_filter",{label:this.id}),ql.searchFilter()}function n(a){return a.closest(".mdl-checkbox")}function r(a){n(a).classList.add("is-checked"),a.checked=!0}function o(a){n(a).classList.remove("is-checked"),a.checked=!1}return{init:e}}()};ql.searchFilter=function(){let e=document.querySelector(".js-filter-form"),t=document.querySelector(".js-search-form");return e?(t&&(e.querySelector("input[name='keywords']").value=t.querySelector("input[name='keywords']").value,e.querySelector("input[name='locale']").value=t.querySelector("input[name='locale']").value),document.querySelector(".js-custom-filter-form")||e.submit()):t&&t.submit(),!1};ql.game=(()=>{function e(t){let n=document.querySelector(".js-lab-leaderboard");t==null||n==null||(n.players=JSON.parse(t))}return{updateLabLeaderboard:e}})();ql.inviteMembers=function(){$toast="",$toastMessage="",$toastLoader="",poller={};function e(){$toast=document.querySelector(".js-toast"),$toastMessage=document.querySelector(".js-toast-message"),$toastLoader=$toast.querySelector(".mdl-js-progress"),ql.subscribe("received-operation-status",r)}function t(o){poller=new ql.Poller(o,1e4,n),poller.start()}function n(o){ql.publish("received-operation-status",o)}function r(o){if(o.status==="finished")if(poller.stop(),$toastLoader.classList.remove("is-visible"),o.succeeded)window.location.reload();else{let a=JSON.parse(o.result);ql.showFlash("warn",a.message),$toast.classList.remove("is-visible")}else $toastLoader.classList.contains("is-visible")||$toastLoader.classList.add("is-visible")}return{init:e,poll:t}}();ql.customFilter=function(){$enableCheckbox="";function e(){$enableCheckbox=document.querySelector(".js-enable-custom-filter"),$enableCheckbox.addEventListener("click",t)}function t(){enable=$enableCheckbox.checked===!0,$.post(`${window.location.pathname}/toggle_enable`,{enable})}return{init:e}}();ql.groupForm=function(){function e(t,n){let r=document.getElementById(t),o=document.getElementById(n);if(r&&o){let a=!1;r.addEventListener("change",d=>{if(o.value===""||!a){let l=d.currentTarget.value;o.value=l.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}}),o.addEventListener("change",d=>{a=!0})}}return{init:e}}();ql.resourcesForm=function(){function e(){let n=document.getElementById("add-translations-button");n&&n.addEventListener("click",r=>{n.classList.toggle("hidden",!0),document.querySelectorAll(".non-default-locale-form").forEach(a=>a.classList.toggle("hidden",!1))})}function t(n,r){let o=document.getElementById(`${n}-link-button`),a=document.getElementById(`${n}-link-input-div`),d=document.getElementById(`${n}-link-input`),l=document.getElementById(`${n}-file-button`),s=document.getElementById(`${n}-file-input-div`),c=document.getElementById(`${n}-file-input`),u=document.getElementById(`${n}-file-delete-button`),p=document.getElementById(`${n}-file-preview`),m=document.getElementById(`${n}-destroy`);o&&a&&s&&c&&o.addEventListener("click",g=>{s.classList.toggle("hidden",!0),c.value=null,c.required=!1,a.classList.toggle("hidden",!1),d.required=r,m.value=!0}),l&&s&&a&&d&&l.addEventListener("click",g=>{a.classList.toggle("hidden",!0),d.value=null,d.required=!1,s.classList.toggle("hidden",!1),c.required=r,m.value=!0}),u&&p&&c&&m&&u.addEventListener("click",g=>{p.classList.toggle("hidden",!0),c.value=null,c.required=r,c.classList.toggle("hidden",!1),m.value=!0}),d&&m&&d.addEventListener("change",g=>{m.value=d.value==""}),c&&m&&c.addEventListener("change",g=>{m.value=c.value==""})}return{init:e,initLocale:t}}();ql.reorderResources=function(){function e(){let l=document.getElementById("reorder-resources-button"),s=document.getElementById("reorder-save-button"),c=document.getElementById("reorder-cancel-button");l&&s&&c&&(ql.sortable.init(".resource-position-field",t),$(".js-sortable").sortable("disable"),l.addEventListener("click",u=>{n(),d(),r()}),s.addEventListener("click",u=>{n(),d(),o()}),c.addEventListener("click",u=>{n(),d(),o(!0)}))}function t(){a(!1)}function n(){let l=document.querySelectorAll(".resources-page-action");l&&l.forEach(s=>s.toggleAttribute("disabled"))}function r(){document.querySelectorAll(".resource-drag-icon").forEach(l=>l.classList.toggle("hidden",!1)),$(".js-sortable").sortable("enable")}function o(l=!1){document.querySelectorAll(".resource-drag-icon").forEach(s=>s.classList.toggle("hidden",!0)),$(".js-sortable").sortable("disable"),l&&($(".js-sortable").sortable("cancel"),a(!0))}function a(l){let s=document.getElementById("reorder-save-button");s&&s.toggleAttribute("disabled",l)}function d(){let l=document.getElementById("reorder-save-button"),s=document.getElementById("reorder-cancel-button");l&&s&&(l.classList.toggle("hidden"),s.classList.toggle("hidden"))}return{init:e}}();ql.header={myAccount:function(){let e,t;function n(){e=document.querySelector(".js-my-account-menu"),t=document.querySelector(".js-main"),e&&($myAccountButton=document.querySelector(".js-my-account-button"),$myAccountButton.addEventListener("click",r,!1));let o=document.querySelector(".js-page-banner"),a=document.querySelector(".js-close-banner");o&&a&&a.addEventListener("click",()=>{o.remove()})}function r(o){e.classList.toggle("is-open")?(ql.track("opened_my_account_menu"),t.addEventListener("click",r,!1)):t.removeEventListener("click",r,!1)}return{init:n}}()};(e=>{function t(n,r){this.instructionId=n,this.refreshPage=r,this.refreshing=!1,this.refresh=function(){if(this.refreshing){console.log("Already polling. Ignoring this refresh.");return}this.startRefreshing(),$.post("/authoring/instructions/"+this.instructionId+"/refresh.json").done(()=>{setTimeout(()=>this.pollStatus(),2e3)}).fail(o=>{console.log(o),this.stopRefreshing()})},this.pollStatus=function(){e.getJson("/instructions/"+this.instructionId+"/status.json").then(o=>{o.state=="failed"?(e.showFlash("error",o.message),this.stopRefreshing()):o.state=="completed"?(e.showFlash("notice",o.message),this.refreshPage?window.location.reload():this.stopRefreshing()):setTimeout(()=>this.pollStatus(),5e3)}).catch(o=>{this.stopRefreshing(),console.log(o)})},this.startRefreshing=function(){let o=this.instructionId;this.refreshing=!0,$(".refresh-instruction-spinner-"+o).removeClass("hidden"),$(".refresh-instruction-button-"+o).addClass("hidden")},this.stopRefreshing=function(){let o=this.instructionId;this.refreshing=!1,$(".refresh-instruction-spinner-"+o).addClass("hidden"),$(".refresh-instruction-button-"+o).removeClass("hidden")}}e.refreshInstruction=function(n,r){new t(n,r).refresh()}})(ql);ql.instructionVariables=function(){return{update(e){document.querySelectorAll("ql-variable,ql-code-block").forEach(t=>t.load(e))},reset(){document.querySelectorAll("ql-variable,ql-code-block").forEach(e=>e.load())}}}();ql.courseOutline=function(){function e(){let t=document.querySelector(".course-instructor-outline-drawer"),n=t.querySelector(".outline__course").querySelector(".active").parentElement,r=n.classList,o;r.contains("course-header")?o=n.closest(".outline__course"):r.contains("module-header")?o=n.closest(".outline__module"):r.contains("activity-header")&&(o=n.closest(".outline__activity")),o&&document.body.clientHeight/2<o.offsetTop-n.offsetHeight&&(t.scrollTop=o.offsetTop-n.offsetHeight)}return{init:e}}();ql.jumpContent=function(){function e(){document.addEventListener("jumpContent",t)}function t(n){let r=document.getElementById("jump-content");r.focus(),r.setAttribute("tabindex","0")}return{init:e}}();initLaunchWithSubscriptionButtonListener=function(){$(".js-launch-with-subscription-button").click(function(){$(this).attr("disabled")||($(".js-launch-with-credits-input").val(0),$(".js-launch-with-subscription-input").val(1),$(".js-launch-with-access-code").val(0),submitLabAccessForm())})};initLaunchWithCreditsButtonListener=function(){$(".js-launch-with-credits-button").click(function(){$(this).attr("disabled")||($(".js-launch-with-credits-input").val(1),$(".js-launch-with-subscription-input").val(0),$(".js-launch-with-access-code").val(0),submitLabAccessForm())})};initLaunchWithAccessCodeButtonListener=function(){$(".js-launch-with-access-code-button").click(function(){$(this).attr("disabled")||($(".js-launch-with-credits-input").val(0),$(".js-launch-with-subscription-input").val(0),$(".js-launch-with-access-code").val(1),submitLabAccessForm())})};initLaunchButtonListener=function(){$(".js-launch-button").click(function(){$(this).attr("disabled")||($(".js-launch-with-credits-input").val(0),$(".js-launch-with-subscription-input").val(0),$(".js-launch-with-access-code").val(0),submitLabAccessForm())})};initLabAccessFormListener=function(){$(".js-lab-access-form").on("ajax:success",function(e,t,n,r){ql.labRun.startLab({accessSuccess:!0})}).on("ajax:error",function(e,t,n,r){$(".js-access-code input").val(""),alertLabAccessError(t.responseText),ql.labControlPanel.reset()}).on("ajax:complete",function(){enableLabAccessModalButtons()})};initAutoTabAccessCode=function(){let e=0;$(".js-access-code-input").on("keyup",function(t){t.keyCode===8&e===0&&$(this).prev(".js-access-code-input").focus(),e=this.value.length}),$(".js-access-code-input").on("input",function(t){this.value.length===this.maxLength&&($(this).next(".js-access-code-input").focus(),e=0)})};submitLabAccessForm=function(){disableLabAccessModalButtons(),$(".js-lab-access-form").submit(),$("#lab-access-modal").modal("hide"),ql.labControlPanel.setStarting()};alertLabAccessError=function(e){$("#lab-access-modal").modal("hide"),$(".js-alert-message").html(e),$(".js-alert").removeClass("alert-success").addClass("alert-error").css("display","flex")};disableLabAccessModalButtons=function(){$(".js-lab-access-modal-button").attr("disabled",!0)};enableLabAccessModalButtons=function(){$(".js-lab-access-modal-button").attr("disabled",!1)};initLabAccessModal=function(){initLaunchWithSubscriptionButtonListener(),initLaunchWithCreditsButtonListener(),initLaunchWithAccessCodeButtonListener(),initLaunchButtonListener(),initLabAccessFormListener(),initAutoTabAccessCode()};ql.labActivityTracking={reset(){document.querySelectorAll("ql-activity-tracking,ql-activity-tracking-ch").forEach(e=>e.reset())}};ql.labAlert={alertMessage(e,t=!0){let n=document.getElementById("alert-snackbar");t&&n.setAttribute("error",!0),n.innerHTML=e,n.open()},alertHttpError(e){e.response.text().then(t=>{ql.labAlert.alertMessage(t)})}};ql.labAssessment=(()=>{let e="/feedback/student/lab/main.html?token=qwiklabs",t="/work/main.ipynb?token=qwiklabs",n="/api/contents",r=(l,s)=>l&&s&&l.src.endsWith(t),o=(l,s)=>{let c=document.querySelector("#jupyter-feedback-frame"),u="&cachebuster="+new Date().getTime().toString(),m=l.src.split("qwiklabs.com")[0]+"qwiklabs.com"+n+e+u;$.get(m).done(function(g){c.srcdoc=g.content,s.open()}).fail(function(g){console.error("Failed to fetch jupyter feedback.",g)})},a=()=>{let l=document.querySelector("#embedded-resource"),s=document.querySelector("#jupyter-feedback-modal");r(l,s)&&o(l,s)};var d=function(l,s,c){c.loading=!0;var u=$.get("/assessments/run_step.json?id="+l+"&step="+s).done(function(p){ql.labAssessment.update(p),int_no=parseInt(s)-1;let m=p.completion_only?"":`Check complete. Points earned: ${p.step_scores[int_no]}. Message: `;p.step_scores[int_no]==p.step_points[int_no]?(m+=`${p.student_messages[int_no]||"Step is complete."}`,ql.labAlert.alertMessage(m,isError=!1)):(m+=`${p.student_messages[int_no]||"It doesn't look like you've completed this step yet. Try again."}`,ql.labAlert.alertMessage(m)),a()}).fail(function(p){console.error("Failed to update assessment",p)}).complete(function(p){c.loading=!1})};return{init(){let l=new hallofmirrors.FocusTrap($(".js-lab-assessment-panel")[0]);document.addEventListener("runAssessmentStepSuccess",a),$(".js-open-lab-assessment-panel").click(function(){$(".js-lab-assessment-panel").addClass("is-open"),l.trapFocus()}),$(".js-close-lab-assessment-panel").click(function(){$(".js-lab-assessment-panel").removeClass("is-open"),l.releaseFocus()}),$(".js-show-run-step-button").on("click",function(){var s=ql.labData.getLabInstanceId(),c=$(this).attr("step_no");s!==void 0&&ql.labData.isRunning()&&d(s,c,this)})},update(l){if(!(typeof l>"u"||typeof l.total_score>"u"||l.total_score.length===0)){var s="";for(l.completion_only?s=l.completed_steps+"/"+l.total_steps:s=l.total_score+"/"+l.perfect_score,$(".js-lab-assessment-total-score").html(s),i=1;i<=parseInt(l.total_steps);i++)l.completion_only?l.step_complete[i-1]?$(".js-assessment-step-score-"+i+" ql-icon:first-child").setAttribute("icon","check"):$(".js-assessment-step-score-"+i+" ql-icon:first-child").setAttribute("icon","close"):$(".js-assessment-step-score-"+i).html(l.step_scores[i-1])}},reset(){var l=$(".js-lab-assessment-total-score").html();typeof l>"u"||(l=l.replace(/.*\//,"\u2014/"),$(".js-lab-assessment-total-score").html(l),$('*[class^="js-assessment-step-score"]').html("\u2014"))}}})();var En=bn($n());initFakeAlertCloseListener=function(){$(".js-alert-close").click(function(){$(".js-alert").hide()})};initCopyCode=function(){$("pre code").each(function(e,t){$(t).after('<button class="button button--text button--small copy-button js-copy-button-'+e+'"><ql-icon>content_copy</ql-icon></button>');let n=document.getElementsByClassName("no-select")[0];var r=new En.default(".js-copy-button-"+e,{target:function(o){return n&&n.classList.remove("no-select"),o.previousElementSibling}});r.on("success",function(o){n&&n.classList.add("no-select"),document.getSelection().removeAllRanges(),$(".js-copy-button-"+e).attr("title",trans.copied).tooltip("fixTitle").tooltip("show")}),r.on("error",function(o){n&&n.classList.add("no-select"),document.getSelection().removeAllRanges();var a="";/iPhone|iPad/i.test(navigator.userAgent)?a=trans.no_support:/Mac/i.test(navigator.userAgent)?a=trans.mac_press:a=trans.windows_press,$(".js-copy-button-"+e).attr("title",a).tooltip("fixTitle").tooltip("show")}),$(".js-copy-button-"+e).mouseout(function(){$(this).tooltip("hide").tooltip("destroy")})})};initImageZoom=function(){$(".js-lab-content img").click(function(e){var t=$(this).attr("src");$("body").append('<div class="lab-content__image-overlay js-zoomed-image"><img class="lab-content__image" src='+t+" /></div>").find(".js-zoomed-image").click(function(n){$(".js-zoomed-image").remove()})})};initPrettyPrint=function(){$(function(){prettyPrint()})};initCodeTabs=function(){let e=Array.from(document.querySelectorAll("ql-code"));e.forEach(t=>t.addEventListener("tabchange",n=>e.filter(r=>r!==t).forEach(r=>r.setLanguage(n.detail.newTab.language))))};initLabContent=function(){initFakeAlertCloseListener(),initCopyCode(),initImageZoom(),initPrettyPrint(),initCodeTabs()};ql.labControlPanel=(()=>{let e;return{init(){e=document.querySelector(".js-lab-control-panel"),e.addEventListener("clickedStartLab",()=>requestStartLab()),document.getElementById("js-are-you-sure-button").addEventListener("click",()=>{ql.labRun.stopLab(),document.getElementById("js-lab-are-you-sure-dialog").close()});function n(){document.getElementById("js-lab-are-you-sure-dialog").open()}e.addEventListener("clickedStopLab",n),$(".js-end-lab-button").on("clickedStopLab",n);let r=document.querySelector("#toggle-lab-control-panel");r&&r.addEventListener("click",()=>{e.classList.toggle("toggled")})},update(t){e.labControlButton=t.labControlButton,e.labTimer=t.labTimer,e.billingLimitRemainder=t.billingLimitRemainder,e.provisioning=t.provisioning,e.provisioningSecondsRemaining=t.provisioningSecondsRemaining,e.labDetails=t.labDetails,e.connectionFiles=t.connectionFiles},reset(){e.labControlButton={running:!1,pending:!1},e.billingLimitRemainder=ql.labData.getLabBillingLimit(),e.provisioning=!1,e.provisioningSecondsRemaining=null,e.connectionFiles=[],e.labDetails=[],e.labTimer={ticking:!1,secondsRemaining:ql.labData.getLabDuration()};for(let t of document.querySelectorAll(".js-end-lab-button-container"))t.classList.add("hidden");this.hideV2Recaptcha()},setStarting(){e.labControlButton={running:!1,pending:!0}},setStopping(){e.labControlButton={running:!0,pending:!0}},setRunning(){e.labControlButton={running:!0,pending:!1}},showV2Recaptcha(){$("#recaptcha-v2-start-lab").removeClass("hidden")},hideV2Recaptcha(){$("#recaptcha-v2-start-lab").addClass("hidden")},addRecaptchaErrorHandler(){window.addEventListener("unhandledrejection",t=>{t.reason.stack.indexOf("recaptcha")>-1&&ql.labControlPanel.showV2Recaptcha()})}}})();window.expireV2Token=function(){ql.labData.setRecaptchaV2Token(void 0)};window.recaptchaComplete=function(e){ql.labData.setRecaptchaV2Token(e),ql.labRun.startLab({accessSuccess:!1})};requestStartLab=function(e){if(!ql.labData.isRecaptchaEnabled()||ql.labData.getRecaptchaV2Token()){ql.labRun.startLab({accessSuccess:!1});return}if(ql.track("clicked_start_lab_button",ql.labData.getAnalyticsPayload()),!document.getElementById("g-recaptcha-response-data-start-lab")){ql.labControlPanel.showV2Recaptcha();return}$.ajaxSetup({timeout:3e3}),executeRecaptchaForStartLabAsync().then(n=>{$.post("/focuses/verify_v3_recaptcha",{recaptchaV3Token:n,id:ql.labData.getFocusId(),parent:ql.labData.getParent()}).done(r=>{r.is_verified?ql.labRun.startLab({accessSuccess:!1}):ql.labControlPanel.showV2Recaptcha()}).error(()=>ql.labControlPanel.showV2Recaptcha())})};ql.labData=function(){let e,t,n,r;return{clearLabInstanceId(){t=null},getLabInstanceId(){return t},setLabInstanceId(o){t=o},getAnalyticsPayload(){return e.analyticsPayload},getLabBillingLimit(){return Number(e.labBillingLimit)},getLabDuration(){return Number(e.labDuration)},getFocusId(){return e.focusId},getParent(){return e.parent},getLearningPlanId(){return e.learningPlanId},getQlcampaign(){return e.qlcampaign},isRecaptchaEnabled(){return e.recaptchaEnabled!=null},getRecaptchaV3Token(){return n},setRecaptchaV3Token(o){n=o},getRecaptchaV2Token(){return r},setRecaptchaV2Token(o){r=o},isOrganizationLicenseRequired(){return e.organizationLicenseRequired!=null},hasCredits(){return e.credits!=null&&e.credits>0},isPaymentRequired(){return e.paymentRequired!=null},isWarningGiven(){return e.warningGiven!=null},isRunning(){return t!=null},init(){e=$(".js-lab-state").data(),t=e.labInstanceId}}}();ql.editRows=function(){let e="",t="",n=[];function r(){e=document.querySelectorAll(".js-edit-row"),t=document.querySelector(".js-edit-title"),n=[t,...e],e.forEach(s=>s.addEventListener("click",a)),t.addEventListener("click",l),$errorFields=document.querySelectorAll(".has-error"),$errorFields.forEach(s=>{$row=s.closest(".js-edit-row"),d($row)}),$inputs=document.querySelectorAll(".js-lab-details input"),$inputs.forEach(s=>{s.addEventListener("keyup",o)})}function o(s){$editRow=this.closest(".js-edit-row"),this.checkValidity()?$editRow.classList.remove("is-invalid"):$editRow.classList.add("is-invalid")}function a(s){if(this.classList.contains("is-selected"))return;l(),d(this);let c=this.querySelectorAll("input"),u=this.querySelectorAll("select"),p=this.querySelectorAll("textarea");p[0]?p[0].focus():u[0]?u[0].focus():c[0]&&c[0].focus()}function d(s){let c=n.indexOf(s);n[c].classList.add("is-selected"),n[c].style.height=`${s.scrollHeight+24}px`,n[c-1]&&n[c-1].classList.add("is-bottom"),n[c+1]&&n[c+1].classList.add("is-top")}function l(){n.forEach(s=>{s.classList.remove("is-selected"),s.classList.remove("is-bottom"),s.classList.remove("is-top"),s.style.height="64px"})}return{init:r}}();ql.additionalResources=function(){function t(){$(document).on("nested:fieldAdded",n),$(document).on("nested:fieldRemoved",r)}function n(o){$editRow=o.target.closest(".js-edit-row"),$editRow.style.height=`${$editRow.scrollHeight+16}px`,ql.initMaterialInputs($editRow)}function r(o){$editRow=o.target.closest(".js-edit-row"),$editRow.style.height=`${$editRow.scrollHeight-122-16}px`}return{init:t}}();ql.deploymentManager=function(){let e="",t="",n="";function r(){e=document.querySelector(".js-dm"),t=document.querySelector(".js-remove-dm-button"),n=document.querySelector(".js-remove-dm"),t.addEventListener("click",o)}function o(a){e.href="",e.style.color="red",e.style.fontWeight="400",e.style.textDecoration="line-through",n.value=1,t.remove()}return{init:r}}();ql.cloudFormation=function(){let e="",t="",n="";function r(){e=document.querySelector(".js-cf"),t=document.querySelector(".js-remove-cf-button"),n=document.querySelectorAll(".js-remove-cf"),t.addEventListener("click",o)}function o(a){e.href="",e.style.color="red",e.style.fontWeight="400",e.style.textDecoration="line-through",n.forEach(d=>d.value=""),t.remove()}return{init:r}}();ql.studentPolicy=function(){let e="",t="",n="";function r(){e=document.querySelector(".js-sp"),t=document.querySelector(".js-remove-sp-button"),n=document.querySelectorAll(".js-remove-sp"),t.addEventListener("click",o)}function o(a){e.href="",e.style.color="red",e.style.fontWeight="400",e.style.textDecoration="line-through",n.forEach(d=>d.value=""),t.remove()}return{init:r}}();ql.instruction=function(){$instructionCard="",$instructionContent="",$instructionHeader="",$instructionLoader="",$instructionRefresh="",instructionPoller={};function e(){$instructionContent=document.querySelector(".js-instruction-content"),$instructionHeader=document.querySelector(".js-instruction-header"),$instructionLoader=document.querySelector(".js-instruction-loader"),$instructionRefresh=document.querySelector(".js-instruction-refresh"),ql.subscribe("received-instruction-status",o),$instructionRefresh&&$instructionRefresh.addEventListener("click",t,!1)}function t(l){l.stopImmediatePropagation(),l.preventDefault(),$instructionContent.classList.add("is-faded"),$instructionLoader.classList.remove("is-hidden");let s=new Request(this.href,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content})});fetch(s).then(ue).then(me).then(c=>n(c.status_path)).catch(d)}function n(l){instructionPoller=new ql.Poller(l,1e3,r,d),instructionPoller.start()}function r(l){ql.publish("received-instruction-status",l)}function o(l){l.state=="completed"&&(instructionPoller.stop(),ql.getHtml(l.display_path).then(a).catch(d))}function a(l){$instructionContent.innerHTML=l,$instructionContent.classList.remove("is-faded"),$instructionContent.classList.remove("is-hidden"),$instructionHeader.classList.remove("has-error"),$instructionLoader.classList.add("is-hidden")}function d(l){var s="Response not a JSON";typeof l=="string"?l.json().then(c=>{s=c.errors}):s=l.statusText,htmlSafeMessage=$("<div>").text(s).html(),$instructionContent.innerHTML=`<div class='lab__instructions__error'>
        <i class='material-icons'>error_outline</i>
        <p>${htmlSafeMessage}</p>
      </div>`,$instructionContent.classList.remove("is-faded"),$instructionContent.classList.remove("is-hidden"),$instructionHeader.classList.add("has-error"),$instructionLoader.classList.add("is-hidden")}return{init:e,poll:n}}();ql.downloadLab=function(){function e(){let t=document.getElementById("file_download-header");if(t===null)return;t.addEventListener("click",n);function n(){t.setAttribute("disabled","disabled"),t.querySelector("i").innerText="checkmark"}}return{init:e}}();ql.publishLab=function(){$publishButton="",$toast="",$toastMessage="",$toastLoader="",publishPoller={};function e(){$publishButton=document.querySelector(".js-publish-button"),$toast=document.querySelector(".js-toast"),$toastMessage=document.querySelector(".js-toast-message"),$toastLoader=$toast.querySelector(".mdl-js-progress"),ql.subscribe("received-publish-status",o),$publishButton.addEventListener("click",t)}function t(a){a.preventDefault();let d=new Request(this.href,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content})});fetch(d).then(ue).then(me).then(l=>n(l.status_path)).catch(console.error)}function n(a){publishPoller=new ql.Poller(a,500,r),publishPoller.start()}function r(a){ql.publish("received-publish-status",a)}function o(a){a.status=="done"||a.status=="error"?(publishPoller.stop(),$toastLoader.classList.remove("is-visible"),$toastMessage.innerHTML=a.html):$toastLoader.classList.contains("is-visible")||($toastLoader.classList.add("is-visible"),$toastMessage.innerHTML=a.html),a.status==="error"?(ql.showFlash("warn",a.html),$toast.classList.remove("is-visible")):$toast.classList.add("is-visible")}return{init:e,poll:n}}();ql.labLocale=function(){$dialog="",$newLocaleButton="",$localeDialogBody="",localeDialog={};function e(){$newLocaleButton=document.querySelector(".js-new-locale"),$dialog=document.querySelector(".js-dialog"),$localeDialogBody=$dialog.querySelector(".js-new-lab-locale"),localeDialog=new ql.MaterialDialog($dialog),$newLocaleButton.addEventListener("click",t)}function t(o){o.preventDefault(),ql.getHtml(this.href).then(n).then(r).catch(console.error)}function n(o){$localeDialogBody.innerHTML=o,ql.initMaterialInputs($localeDialogBody),localeDialog.open()}function r(){$(document).on("ajax:success","form",function(o,a,d,l){$(document).off("ajax:success"),localeDialog.close(),window.location.replace(l.responseJSON.url)}).on("ajax:error","form",function(o,a,d,l){console.error(l)})}return{init:e}}();ql.tagSelect=function(){let e;function t(){e=document.querySelector(".js-chosen-tags").closest(".js-edit-row"),$(".js-chosen-tags").chosen().change(n)}function n(r){$chosenContainers=e.querySelectorAll(".chosen-container");let o=293;$chosenContainers.forEach(a=>{o+=a.offsetHeight}),e.style.height=`${o}px`}return{init:t}}();ql.permissionsSelect=function(){let e="",t="",n="";function r(){n=document.querySelector(".js-permissions-advanced-link"),t=document.querySelector(".js-chosen-permissions"),e=document.querySelector(".js-permissions-input"),e.addEventListener("change",a),n.addEventListener("click",d),$(".js-chosen-permissions").chosen().change(o)}function o(s){let u=[...this.selectedOptions].map(p=>p.value).join(`\r
`);e.value=u,l()}function a(s){this.classList.contains("is-visible")&&([...t.querySelectorAll("option")].forEach(p=>p.selected=!1),this.value.split(`
`).forEach(p=>{let m=t.querySelector(`[value='${p}']`);m&&(m.selected=!0)}),$(".js-chosen-permissions").trigger("chosen:updated")),l()}function d(s){e.classList.toggle("is-visible"),$chosen=document.querySelector(".js-permissions .chosen-container"),$chosen.classList.toggle("is-hidden"),$editRow=this.closest(".js-edit-row"),$editRow.classList.toggle("is-advanced"),newLabel=this.dataset.label,oldLabel=this.innerText,this.setAttribute("data-label",oldLabel),this.innerText=newLabel,l()}function l(){$chosen=document.querySelector(".js-permissions .chosen-container"),h=$chosen.offsetHeight,$editRow=$chosen.closest(".js-edit-row"),$editRow.style.height=`${h+114}px`}return{init:r}}();ql.disableLab=function(){$disableButton={},$disableIcon={},$disableNotice={};function e(){$disableButton=document.querySelector(".js-disable-lab"),$disableIcon=$disableButton.querySelector("ql-icon"),$disableButton.addEventListener("click",t,!1),$disableNotice=document.querySelector(".js-disable-notice"),ql.subscribe("labUpdated",r)}function t(o){o.preventDefault(),o.stopImmediatePropagation(),n(this.href)}function n(o){fetch(o,{method:"PATCH",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json","Content-Type":"application/json"})}).then(ue).then(me).then(a=>ql.publish("labUpdated",a)).catch(a=>console.log(a))}function r(o){let a=o.disabled_for_catalogs_at?"disable":"enable",d=o.disabled_for_catalogs_at?"enable":"disable",l=o.disabled_for_catalogs_at?"check_box":"check_box_outline_blank",s=o.disabled_for_catalogs_at?"Enable lab":"Disable lab",c=$disableButton.href.replace(a,d);$disableButton.href=c,$disableIcon?$disableIcon.innerHTML=l:$disableButton.innerHTML=s,o.disabled_for_catalogs_at?$("#modal_disable").modal("show"):$disableNotice.remove()}return{init:e}}();ql.labIndexView=function(){let e=[],t=0;function n(){e=[...document.querySelectorAll(".js-lab-row")],e.length&&(e[t].focus(),window.addEventListener("keyup",r))}function r(o){o.key==="ArrowDown"?e[t+1]&&(t++,e[t].focus()):o.key==="ArrowUp"&&e[t-1]&&(t--,e[t].focus())}return{init:n}}();ql.labInlineInstructionComponents=(()=>{let e=["ql-activity-tracking","ql-activity-tracking-ch","ql-multiple-choice-probe","ql-multiple-select-probe","ql-true-false-probe"].join(", ");return{updateLabInstanceId(){$(e).attr("labInstanceId",ql.labData.getLabInstanceId())}}})();ql.hints={reset(){document.querySelectorAll("ql-hint").forEach(e=>e.reset())},updateLabInstanceId(){document.querySelectorAll("ql-hint").forEach(e=>e.updateLabInstanceId(ql.labData.getLabInstanceId()))}};ql.labLayout=function(){return{setTerminalLayout(){let e=document.getElementById("terminal-drawer"),t=document.getElementById("control-panel-drawer"),n=document.querySelector(".js-lab-control-panel"),r=document.getElementById("control-panel-menu"),o=document.getElementById("control-panel-target");for(let a of document.querySelectorAll(".js-end-lab-button-container"))a.classList.remove("hidden");if(r.children[0]!==n&&(r.appendChild(n),o.style.display="block",r.open()),t&&(t.open=!1),e){e.open=!0;let a=document.querySelector("#discussion-drawer");a&&(a.mode="over",a.hide(),setTimeout(()=>this.resizeLayout(),200))}},reset(){let e=document.getElementById("terminal-drawer"),t=document.getElementById("control-panel-drawer"),n=document.querySelector(".js-lab-control-panel"),r=document.getElementById("control-panel-target");t.appendChild(n),r.style.display="none",e&&(e.open=!1),t&&(t.open=!0),this.resizeLayout()},resizeLayout(){if(ql.cloudTerminal.isTerminalActive()){let d=document.getElementById("terminal-drawer");d.open=!1,d.open=!0;let l=document.getElementById("control-panel-menu");l&&l.close();return}let e=document.getElementById("js-outline-container"),t=document.querySelector(".lab-content__outline"),n=document.querySelector(".lab-outline-place-holder"),r=document.getElementById("control-panel-drawer"),o=document.querySelector(".js-lab-control-panel"),a=document.getElementById("lab-instructions");window.innerWidth<960?(o.classList.add("ql-lab-control-panel__in-content-drawer"),a.prepend(o),r.open=!1,t&&(t.classList.add("ql-lab-outline__in-content-drawer"),n.prepend(t))):(o.classList.remove("ql-lab-control-panel__in-content-drawer"),r.appendChild(o),r.open=!0,t&&(t.classList.remove("ql-lab-outline__in-content-drawer"),e.appendChild(t)))},enableResizeLayout(){this.resizeLayout(),window.addEventListener("resize",this.resizeLayout)}}}();ql.labOutline={links:function(){let e,t,n,r;function d(){$container=document.querySelector(".js-lab-wrapper"),e=document.querySelector(".js-lab-content"),n=e.querySelectorAll("h2:not(ql-expandable-infobox > h2)"),t=document.querySelector(".js-lab-content-outline"),r=t.querySelectorAll("a"),r.forEach(u=>u.addEventListener("click",l)),$container.addEventListener("scroll",s)}function l(u){u.preventDefault(),ql.track("clicked_lab_outline",{label:u.target.innerText});let p=u.target.getAttribute("href"),m=e.querySelector(p);m&&$($container).animate({scrollTop:m.offsetTop-24},500,()=>{u.target.blur(),s()})}function s(u){requestAnimationFrame(()=>{let p=$container.scrollTop+160,m=[...n].filter(b=>b.offsetTop<=p),g=m.length?m.pop():null;c(g)})}function c(u){if(r.forEach(p=>p.classList.remove("is-active")),r.forEach(p=>p.removeAttribute("aria-current")),u!=null){let p=t.querySelector(`a[href='#${u.id}']`);p.classList.add("is-active"),p.setAttribute("aria-current","step")}}return{init:d}}()};initRateItListener=function(){$(".js-rateit").bind("keydown",onSliderKeydown.bind(this)),$(".js-rateit").bind("rated",function(e,t){setRating(t),$("#submit").data("disabled")||$("#submit").prop("disabled",!1)}),$("#rate-lab-btn").on("click",()=>openLabReview())};openLabReview=function(){document.getElementById("lab-review-dialog").open()};initFormSubmitHandler=function(){$("#submit").on("click",()=>$(".js-lab-review-form").submit())};initReviewSubmitListener=function(){$(".js-lab-review-form").on("ajax:success",function(e,t,n,r){alertLabReviewSuccess(r)}).on("ajax:error",function(e,t,n,r){alertLabReviewError(t.responseText)})};alertLabReviewSuccess=function(e){document.getElementById("lab-review-dialog").close();let t=document.getElementById("alert-snackbar");t.innerHTML=trans.thanks_review,t.open()};alertLabReviewError=function(e){document.getElementById("lab-review-dialog").close();let t=document.getElementById("alert-snackbar");t.setAttribute("error",!0),t.innerHTML=JSON.parse(e).message,t.open()};setRating=function(e){$(".js-rating-input").val(e-3);let t=document.getElementById("lab-review-rateit");t.setAttribute("aria-valuenow",e),t.setAttribute("aria-valuetext",transSlider[`star_amount_${e}`])};moveSliderTo=function(t){var t=Math.min(Math.max(t,1),$("#lab-review-rateit").rateit("max"));$("#lab-review-rateit").rateit("value",t),$("#lab-review-rateit").trigger("rated",t)};onSliderKeydown=function(e){var t=$("#lab-review-rateit").rateit("value");switch(e.key){case"ArrowLeft":case"ArrowDown":this.moveSliderTo(t-1);break;case"ArrowRight":case"ArrowUp":this.moveSliderTo(t+1);break}};initLabReviewModal=function(){initRateItListener(),initReviewSubmitListener(),initFormSubmitHandler()};window.transSlider={};initLabReviewTranslations=function(e){transSlider=e};ql.labRun=(()=>{let e;function t(){e=new hallofmirrors.lab.LabInstancePoller({labRunnerId:ql.labData.getFocusId(),labContainerType:ql.labData.getParent(),successCallback(n){if(n.isExpired){ql.labRun.stopLab();return}ql.labData.setLabInstanceId(n.labInstanceId),ql.labAssessment.update(n.assessmentInfo),ql.game.updateLabLeaderboard(n.gameLeaderboard),ql.labInlineInstructionComponents.updateLabInstanceId(),ql.hints.updateLabInstanceId(),ql.labControlPanel.update(n),ql.instructionVariables.update(n.resourceData),ql.cloudTerminal.update(n.terminalUrl),n.terminalUrl&&ql.labLayout.setTerminalLayout()},errorCallback(n){console.error("Lab poll error: ",n)}})}return{init(){ql.labControlPanel.init(),ql.labLayout.enableResizeLayout(),t(),ql.labData.isRunning()&&e.start()},startLab({accessSuccess:n,ackedQuotaWarning:r}){if(ql.labData.isOrganizationLicenseRequired()&&ql.labData.isPaymentRequired()&&!ql.labData.hasCredits()){document.getElementById("insufficient-organization-licenses-modal").open();return}if((ql.labData.isPaymentRequired()||ql.labData.isWarningGiven())&&!n){$("#lab-access-modal").modal("show");return}ql.labControlPanel.setStarting(),(ql.labData.isRecaptchaEnabled()?executeRecaptchaForStartLabAsync().then(a=>ql.labData.setRecaptchaV3Token(a)):Promise.resolve()).then(()=>ql.labXhr.startLab({ackedQuotaWarning:r})).then(a=>{a.message&&hallofmirrors.snackbarService.alert(a.message),ql.track("lab_started",ql.labData.getAnalyticsPayload()),e.start(),ql.labControlPanel.hideV2Recaptcha(),ql.labData.setRecaptchaV2Token(void 0),ql.labData.setRecaptchaV3Token(void 0)}).catch(a=>{ql.labControlPanel.reset(),ql.labAlert.alertHttpError(a)})},endRunningLabAndStartLab({labInstanceId:n}){hallofmirrors.lab.labHttpService.endLab({labInstanceId:n}),ql.labRun.confirmStartLab({labInstanceId:n,ackedQuotaWarning:!1})},confirmStartLab({ackedQuotaWarning:n}){document.getElementById("alert-snackbar").close(),ql.labRun.startLab({accessSuccess:!0,ackedQuotaWarning:n})},stopLab(){ql.labControlPanel.setStopping(),ql.track("clicked_end_lab_button",ql.labData.getAnalyticsPayload()),ql.labXhr.stopLab().then(({runtime_error:n,resource_limit_violation:r})=>{ql.labData.clearLabInstanceId(),e.stop(),ql.labControlPanel.reset(),ql.labAssessment.reset(),ql.labActivityTracking.reset(),ql.instructionVariables.reset(),ql.cloudTerminal.reset(),ql.labLayout.reset(),ql.hints.reset(),n?ql.labAlert.alertMessage(n):r?ql.labAlert.alertMessage(r):document.getElementById("lab-review-dialog").open()}).catch(n=>{ql.labAlert.alertHttpError(n),ql.labControlPanel.setRunning()})}}})();ql.labXhr={startLab({ackedQuotaWarning:e}){return hallofmirrors.lab.labHttpService.startLab({labRunnerId:ql.labData.getFocusId(),labContainerType:ql.labData.getParent(),learningPlanId:ql.labData.getLearningPlanId(),qlcampaign:ql.labData.getQlcampaign(),recaptchaV3Token:ql.labData.getRecaptchaV3Token(),recaptchaV2Token:ql.labData.getRecaptchaV2Token(),ackedQuotaWarning:e})},stopLab(){let e=ql.labData.getLabInstanceId();return e?hallofmirrors.lab.labHttpService.endLab({labInstanceId:e}):Promise.resolve({runtime_error:null,resource_limit_violation:null})}};var G="top",te="bottom",ee="right",Q="left",At="auto",xe=[G,te,ee,Q],Se="start",je="end",Ln="clippingParents",Ct="viewport",We="popper",kn="reference",Jt=xe.reduce(function(e,t){return e.concat([t+"-"+Se,t+"-"+je])},[]),Tt=[].concat(xe,[At]).reduce(function(e,t){return e.concat([t,t+"-"+Se,t+"-"+je])},[]),xi="beforeRead",Ai="read",Ci="afterRead",Ti="beforeMain",ji="main",Ii="afterMain",Ri="beforeWrite",Pi="write",Oi="afterWrite",xn=[xi,Ai,Ci,Ti,ji,Ii,Ri,Pi,Oi];function ie(e){return e?(e.nodeName||"").toLowerCase():null}function Y(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function de(e){var t=Y(e).Element;return e instanceof t||e instanceof Element}function ne(e){var t=Y(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function ze(e){if(typeof ShadowRoot>"u")return!1;var t=Y(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Bi(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},o=t.attributes[n]||{},a=t.elements[n];!ne(a)||!ie(a)||(Object.assign(a.style,r),Object.keys(o).forEach(function(d){var l=o[d];l===!1?a.removeAttribute(d):a.setAttribute(d,l===!0?"":l)}))})}function Di(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var o=t.elements[r],a=t.attributes[r]||{},d=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),l=d.reduce(function(s,c){return s[c]="",s},{});!ne(o)||!ie(o)||(Object.assign(o.style,l),Object.keys(a).forEach(function(s){o.removeAttribute(s)}))})}}var at={name:"applyStyles",enabled:!0,phase:"write",fn:Bi,effect:Di,requires:["computeStyles"]};function re(e){return e.split("-")[0]}var ge=Math.max,Ie=Math.min,$e=Math.round;function Je(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function lt(){return!/^((?!chrome|android).)*safari/i.test(Je())}function fe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),o=1,a=1;t&&ne(e)&&(o=e.offsetWidth>0&&$e(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&$e(r.height)/e.offsetHeight||1);var d=de(e)?Y(e):window,l=d.visualViewport,s=!lt()&&n,c=(r.left+(s&&l?l.offsetLeft:0))/o,u=(r.top+(s&&l?l.offsetTop:0))/a,p=r.width/o,m=r.height/a;return{width:p,height:m,top:u,right:c+p,bottom:u+m,left:c,x:c,y:u}}function Re(e){var t=fe(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function ct(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&ze(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function le(e){return Y(e).getComputedStyle(e)}function Yt(e){return["table","td","th"].indexOf(ie(e))>=0}function oe(e){return((de(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ee(e){return ie(e)==="html"?e:e.assignedSlot||e.parentNode||(ze(e)?e.host:null)||oe(e)}function An(e){return!ne(e)||le(e).position==="fixed"?null:e.offsetParent}function Mi(e){var t=/firefox/i.test(Je()),n=/Trident/i.test(Je());if(n&&ne(e)){var r=le(e);if(r.position==="fixed")return null}var o=Ee(e);for(ze(o)&&(o=o.host);ne(o)&&["html","body"].indexOf(ie(o))<0;){var a=le(o);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return o;o=o.parentNode}return null}function ve(e){for(var t=Y(e),n=An(e);n&&Yt(n)&&le(n).position==="static";)n=An(n);return n&&(ie(n)==="html"||ie(n)==="body"&&le(n).position==="static")?t:n||Mi(e)||t}function Pe(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Oe(e,t,n){return ge(e,Ie(t,n))}function Cn(e,t,n){var r=Oe(e,t,n);return r>n?n:r}function ut(){return{top:0,right:0,bottom:0,left:0}}function dt(e){return Object.assign({},ut(),e)}function ft(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var Ni=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,dt(typeof t!="number"?t:ft(t,xe))};function Hi(e){var t,n=e.state,r=e.name,o=e.options,a=n.elements.arrow,d=n.modifiersData.popperOffsets,l=re(n.placement),s=Pe(l),c=[Q,ee].indexOf(l)>=0,u=c?"height":"width";if(!(!a||!d)){var p=Ni(o.padding,n),m=Re(a),g=s==="y"?G:Q,b=s==="y"?te:ee,w=n.rects.reference[u]+n.rects.reference[s]-d[s]-n.rects.popper[u],E=d[s]-n.rects.reference[s],P=ve(a),R=P?s==="y"?P.clientHeight||0:P.clientWidth||0:0,C=w/2-E/2,f=p[g],T=R-m[u]-p[b],y=R/2-m[u]/2+C,O=Oe(f,y,T),W=s;n.modifiersData[r]=(t={},t[W]=O,t.centerOffset=O-y,t)}}function Fi(e){var t=e.state,n=e.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||ct(t.elements.popper,o)&&(t.elements.arrow=o))}var Tn={name:"arrow",enabled:!0,phase:"main",fn:Hi,effect:Fi,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function pe(e){return e.split("-")[1]}var Vi={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ui(e,t){var n=e.x,r=e.y,o=t.devicePixelRatio||1;return{x:$e(n*o)/o||0,y:$e(r*o)/o||0}}function jn(e){var t,n=e.popper,r=e.popperRect,o=e.placement,a=e.variation,d=e.offsets,l=e.position,s=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,p=e.isFixed,m=d.x,g=m===void 0?0:m,b=d.y,w=b===void 0?0:b,E=typeof u=="function"?u({x:g,y:w}):{x:g,y:w};g=E.x,w=E.y;var P=d.hasOwnProperty("x"),R=d.hasOwnProperty("y"),C=Q,f=G,T=window;if(c){var y=ve(n),O="clientHeight",W="clientWidth";if(y===Y(n)&&(y=oe(n),le(y).position!=="static"&&l==="absolute"&&(O="scrollHeight",W="scrollWidth")),y=y,o===G||(o===Q||o===ee)&&a===je){f=te;var U=p&&y===T&&T.visualViewport?T.visualViewport.height:y[O];w-=U-r.height,w*=s?1:-1}if(o===Q||(o===G||o===te)&&a===je){C=ee;var N=p&&y===T&&T.visualViewport?T.visualViewport.width:y[W];g-=N-r.width,g*=s?1:-1}}var F=Object.assign({position:l},c&&Vi),V=u===!0?Ui({x:g,y:w},Y(n)):{x:g,y:w};if(g=V.x,w=V.y,s){var B;return Object.assign({},F,(B={},B[f]=R?"0":"",B[C]=P?"0":"",B.transform=(T.devicePixelRatio||1)<=1?"translate("+g+"px, "+w+"px)":"translate3d("+g+"px, "+w+"px, 0)",B))}return Object.assign({},F,(t={},t[f]=R?w+"px":"",t[C]=P?g+"px":"",t.transform="",t))}function Wi(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=r===void 0?!0:r,a=n.adaptive,d=a===void 0?!0:a,l=n.roundOffsets,s=l===void 0?!0:l,c={placement:re(t.placement),variation:pe(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,jn(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:d,roundOffsets:s})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,jn(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var In={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Wi,data:{}};var jt={passive:!0};function zi(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,a=o===void 0?!0:o,d=r.resize,l=d===void 0?!0:d,s=Y(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach(function(u){u.addEventListener("scroll",n.update,jt)}),l&&s.addEventListener("resize",n.update,jt),function(){a&&c.forEach(function(u){u.removeEventListener("scroll",n.update,jt)}),l&&s.removeEventListener("resize",n.update,jt)}}var Rn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:zi,data:{}};var Ji={left:"right",right:"left",bottom:"top",top:"bottom"};function Ye(e){return e.replace(/left|right|bottom|top/g,function(t){return Ji[t]})}var Yi={start:"end",end:"start"};function It(e){return e.replace(/start|end/g,function(t){return Yi[t]})}function Be(e){var t=Y(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function De(e){return fe(oe(e)).left+Be(e).scrollLeft}function Xt(e,t){var n=Y(e),r=oe(e),o=n.visualViewport,a=r.clientWidth,d=r.clientHeight,l=0,s=0;if(o){a=o.width,d=o.height;var c=lt();(c||!c&&t==="fixed")&&(l=o.offsetLeft,s=o.offsetTop)}return{width:a,height:d,x:l+De(e),y:s}}function Gt(e){var t,n=oe(e),r=Be(e),o=(t=e.ownerDocument)==null?void 0:t.body,a=ge(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),d=ge(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),l=-r.scrollLeft+De(e),s=-r.scrollTop;return le(o||n).direction==="rtl"&&(l+=ge(n.clientWidth,o?o.clientWidth:0)-a),{width:a,height:d,x:l,y:s}}function Me(e){var t=le(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function Rt(e){return["html","body","#document"].indexOf(ie(e))>=0?e.ownerDocument.body:ne(e)&&Me(e)?e:Rt(Ee(e))}function Ae(e,t){var n;t===void 0&&(t=[]);var r=Rt(e),o=r===((n=e.ownerDocument)==null?void 0:n.body),a=Y(r),d=o?[a].concat(a.visualViewport||[],Me(r)?r:[]):r,l=t.concat(d);return o?l:l.concat(Ae(Ee(d)))}function Xe(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Xi(e,t){var n=fe(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function Pn(e,t,n){return t===Ct?Xe(Xt(e,n)):de(t)?Xi(t,n):Xe(Gt(oe(e)))}function Gi(e){var t=Ae(Ee(e)),n=["absolute","fixed"].indexOf(le(e).position)>=0,r=n&&ne(e)?ve(e):e;return de(r)?t.filter(function(o){return de(o)&&ct(o,r)&&ie(o)!=="body"}):[]}function Kt(e,t,n,r){var o=t==="clippingParents"?Gi(e):[].concat(t),a=[].concat(o,[n]),d=a[0],l=a.reduce(function(s,c){var u=Pn(e,c,r);return s.top=ge(u.top,s.top),s.right=Ie(u.right,s.right),s.bottom=Ie(u.bottom,s.bottom),s.left=ge(u.left,s.left),s},Pn(e,d,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function pt(e){var t=e.reference,n=e.element,r=e.placement,o=r?re(r):null,a=r?pe(r):null,d=t.x+t.width/2-n.width/2,l=t.y+t.height/2-n.height/2,s;switch(o){case G:s={x:d,y:t.y-n.height};break;case te:s={x:d,y:t.y+t.height};break;case ee:s={x:t.x+t.width,y:l};break;case Q:s={x:t.x-n.width,y:l};break;default:s={x:t.x,y:t.y}}var c=o?Pe(o):null;if(c!=null){var u=c==="y"?"height":"width";switch(a){case Se:s[c]=s[c]-(t[u]/2-n[u]/2);break;case je:s[c]=s[c]+(t[u]/2-n[u]/2);break;default:}}return s}function be(e,t){t===void 0&&(t={});var n=t,r=n.placement,o=r===void 0?e.placement:r,a=n.strategy,d=a===void 0?e.strategy:a,l=n.boundary,s=l===void 0?Ln:l,c=n.rootBoundary,u=c===void 0?Ct:c,p=n.elementContext,m=p===void 0?We:p,g=n.altBoundary,b=g===void 0?!1:g,w=n.padding,E=w===void 0?0:w,P=dt(typeof E!="number"?E:ft(E,xe)),R=m===We?kn:We,C=e.rects.popper,f=e.elements[b?R:m],T=Kt(de(f)?f:f.contextElement||oe(e.elements.popper),s,u,d),y=fe(e.elements.reference),O=pt({reference:y,element:C,strategy:"absolute",placement:o}),W=Xe(Object.assign({},C,O)),U=m===We?W:y,N={top:T.top-U.top+P.top,bottom:U.bottom-T.bottom+P.bottom,left:T.left-U.left+P.left,right:U.right-T.right+P.right},F=e.modifiersData.offset;if(m===We&&F){var V=F[o];Object.keys(N).forEach(function(B){var Z=[ee,te].indexOf(B)>=0?1:-1,A=[G,te].indexOf(B)>=0?"y":"x";N[B]+=V[A]*Z})}return N}function Qt(e,t){t===void 0&&(t={});var n=t,r=n.placement,o=n.boundary,a=n.rootBoundary,d=n.padding,l=n.flipVariations,s=n.allowedAutoPlacements,c=s===void 0?Tt:s,u=pe(r),p=u?l?Jt:Jt.filter(function(b){return pe(b)===u}):xe,m=p.filter(function(b){return c.indexOf(b)>=0});m.length===0&&(m=p);var g=m.reduce(function(b,w){return b[w]=be(e,{placement:w,boundary:o,rootBoundary:a,padding:d})[re(w)],b},{});return Object.keys(g).sort(function(b,w){return g[b]-g[w]})}function Ki(e){if(re(e)===At)return[];var t=Ye(e);return[It(e),t,It(t)]}function Qi(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,a=o===void 0?!0:o,d=n.altAxis,l=d===void 0?!0:d,s=n.fallbackPlacements,c=n.padding,u=n.boundary,p=n.rootBoundary,m=n.altBoundary,g=n.flipVariations,b=g===void 0?!0:g,w=n.allowedAutoPlacements,E=t.options.placement,P=re(E),R=P===E,C=s||(R||!b?[Ye(E)]:Ki(E)),f=[E].concat(C).reduce(function(x,I){return x.concat(re(I)===At?Qt(t,{placement:I,boundary:u,rootBoundary:p,padding:c,flipVariations:b,allowedAutoPlacements:w}):I)},[]),T=t.rects.reference,y=t.rects.popper,O=new Map,W=!0,U=f[0],N=0;N<f.length;N++){var F=f[N],V=re(F),B=pe(F)===Se,Z=[G,te].indexOf(V)>=0,A=Z?"width":"height",M=be(t,{placement:F,boundary:u,rootBoundary:p,altBoundary:m,padding:c}),z=Z?B?ee:Q:B?te:G;T[A]>y[A]&&(z=Ye(z));var J=Ye(z),se=[];if(a&&se.push(M[V]<=0),l&&se.push(M[z]<=0,M[J]<=0),se.every(function(x){return x})){U=F,W=!1;break}O.set(F,se)}if(W)for(var L=b?3:1,_=function(I){var K=f.find(function(he){var ye=O.get(he);if(ye)return ye.slice(0,I).every(function(He){return He})});if(K)return U=K,"break"},q=L;q>0;q--){var k=_(q);if(k==="break")break}t.placement!==U&&(t.modifiersData[r]._skip=!0,t.placement=U,t.reset=!0)}}var On={name:"flip",enabled:!0,phase:"main",fn:Qi,requiresIfExists:["offset"],data:{_skip:!1}};function Bn(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Dn(e){return[G,ee,te,Q].some(function(t){return e[t]>=0})}function Zi(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,a=t.modifiersData.preventOverflow,d=be(t,{elementContext:"reference"}),l=be(t,{altBoundary:!0}),s=Bn(d,r),c=Bn(l,o,a),u=Dn(s),p=Dn(c);t.modifiersData[n]={referenceClippingOffsets:s,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":p})}var Mn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Zi};function er(e,t,n){var r=re(e),o=[Q,G].indexOf(r)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,d=a[0],l=a[1];return d=d||0,l=(l||0)*o,[Q,ee].indexOf(r)>=0?{x:l,y:d}:{x:d,y:l}}function tr(e){var t=e.state,n=e.options,r=e.name,o=n.offset,a=o===void 0?[0,0]:o,d=Tt.reduce(function(u,p){return u[p]=er(p,t.rects,a),u},{}),l=d[t.placement],s=l.x,c=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=s,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=d}var Nn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:tr};function nr(e){var t=e.state,n=e.name;t.modifiersData[n]=pt({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var Hn={name:"popperOffsets",enabled:!0,phase:"read",fn:nr,data:{}};function Zt(e){return e==="x"?"y":"x"}function ir(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,a=o===void 0?!0:o,d=n.altAxis,l=d===void 0?!1:d,s=n.boundary,c=n.rootBoundary,u=n.altBoundary,p=n.padding,m=n.tether,g=m===void 0?!0:m,b=n.tetherOffset,w=b===void 0?0:b,E=be(t,{boundary:s,rootBoundary:c,padding:p,altBoundary:u}),P=re(t.placement),R=pe(t.placement),C=!R,f=Pe(P),T=Zt(f),y=t.modifiersData.popperOffsets,O=t.rects.reference,W=t.rects.popper,U=typeof w=="function"?w(Object.assign({},t.rects,{placement:t.placement})):w,N=typeof U=="number"?{mainAxis:U,altAxis:U}:Object.assign({mainAxis:0,altAxis:0},U),F=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,V={x:0,y:0};if(y){if(a){var B,Z=f==="y"?G:Q,A=f==="y"?te:ee,M=f==="y"?"height":"width",z=y[f],J=z+E[Z],se=z-E[A],L=g?-W[M]/2:0,_=R===Se?O[M]:W[M],q=R===Se?-W[M]:-O[M],k=t.elements.arrow,x=g&&k?Re(k):{width:0,height:0},I=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:ut(),K=I[Z],he=I[A],ye=Oe(0,O[M],x[M]),He=C?O[M]/2-L-ye-K-N.mainAxis:_-ye-K-N.mainAxis,Le=C?-O[M]/2+L+ye+he+N.mainAxis:q+ye+he+N.mainAxis,Fe=t.elements.arrow&&ve(t.elements.arrow),gt=Fe?f==="y"?Fe.clientTop||0:Fe.clientLeft||0:0,Ke=(B=F?.[f])!=null?B:0,vt=z+He-Ke-gt,bt=z+Le-Ke,Qe=Oe(g?Ie(J,vt):J,z,g?ge(se,bt):se);y[f]=Qe,V[f]=Qe-z}if(l){var Ze,_t=f==="x"?G:Q,yt=f==="x"?te:ee,qe=y[T],ke=T==="y"?"height":"width",et=qe+E[_t],Ce=qe-E[yt],tt=[G,Q].indexOf(P)!==-1,wt=(Ze=F?.[T])!=null?Ze:0,qt=tt?et:qe-O[ke]-W[ke]-wt+N.altAxis,St=tt?qe+O[ke]+W[ke]-wt-N.altAxis:Ce,$t=g&&tt?Cn(qt,qe,St):Oe(g?qt:et,qe,g?St:Ce);y[T]=$t,V[T]=$t-qe}t.modifiersData[r]=V}}var Fn={name:"preventOverflow",enabled:!0,phase:"main",fn:ir,requiresIfExists:["offset"]};function en(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function tn(e){return e===Y(e)||!ne(e)?Be(e):en(e)}function rr(e){var t=e.getBoundingClientRect(),n=$e(t.width)/e.offsetWidth||1,r=$e(t.height)/e.offsetHeight||1;return n!==1||r!==1}function nn(e,t,n){n===void 0&&(n=!1);var r=ne(t),o=ne(t)&&rr(t),a=oe(t),d=fe(e,o,n),l={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(r||!r&&!n)&&((ie(t)!=="body"||Me(a))&&(l=tn(t)),ne(t)?(s=fe(t,!0),s.x+=t.clientLeft,s.y+=t.clientTop):a&&(s.x=De(a))),{x:d.left+l.scrollLeft-s.x,y:d.top+l.scrollTop-s.y,width:d.width,height:d.height}}function or(e){var t=new Map,n=new Set,r=[];e.forEach(function(a){t.set(a.name,a)});function o(a){n.add(a.name);var d=[].concat(a.requires||[],a.requiresIfExists||[]);d.forEach(function(l){if(!n.has(l)){var s=t.get(l);s&&o(s)}}),r.push(a)}return e.forEach(function(a){n.has(a.name)||o(a)}),r}function rn(e){var t=or(e);return xn.reduce(function(n,r){return n.concat(t.filter(function(o){return o.phase===r}))},[])}function on(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function sn(e){var t=e.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var Vn={placement:"bottom",modifiers:[],strategy:"absolute"};function Un(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Wn(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,o=t.defaultOptions,a=o===void 0?Vn:o;return function(l,s,c){c===void 0&&(c=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Vn,a),modifiersData:{},elements:{reference:l,popper:s},attributes:{},styles:{}},p=[],m=!1,g={state:u,setOptions:function(P){var R=typeof P=="function"?P(u.options):P;w(),u.options=Object.assign({},a,u.options,R),u.scrollParents={reference:de(l)?Ae(l):l.contextElement?Ae(l.contextElement):[],popper:Ae(s)};var C=rn(sn([].concat(r,u.options.modifiers)));return u.orderedModifiers=C.filter(function(f){return f.enabled}),b(),g.update()},forceUpdate:function(){if(!m){var P=u.elements,R=P.reference,C=P.popper;if(Un(R,C)){u.rects={reference:nn(R,ve(C),u.options.strategy==="fixed"),popper:Re(C)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(N){return u.modifiersData[N.name]=Object.assign({},N.data)});for(var f=0;f<u.orderedModifiers.length;f++){if(u.reset===!0){u.reset=!1,f=-1;continue}var T=u.orderedModifiers[f],y=T.fn,O=T.options,W=O===void 0?{}:O,U=T.name;typeof y=="function"&&(u=y({state:u,options:W,name:U,instance:g})||u)}}}},update:on(function(){return new Promise(function(E){g.forceUpdate(),E(u)})}),destroy:function(){w(),m=!0}};if(!Un(l,s))return g;g.setOptions(c).then(function(E){!m&&c.onFirstUpdate&&c.onFirstUpdate(E)});function b(){u.orderedModifiers.forEach(function(E){var P=E.name,R=E.options,C=R===void 0?{}:R,f=E.effect;if(typeof f=="function"){var T=f({state:u,name:P,instance:g,options:C}),y=function(){};p.push(T||y)}})}function w(){p.forEach(function(E){return E()}),p=[]}return g}}var sr=[Rn,Hn,In,at,Nn,On,Fn,Tn,Mn],an=Wn({defaultModifiers:sr});var ar="tippy-box",ti="tippy-content",lr="tippy-backdrop",ni="tippy-arrow",ii="tippy-svg-arrow",Ne={passive:!0,capture:!0},ri=function(){return document.body};function ln(e,t,n){if(Array.isArray(e)){var r=e[t];return r??(Array.isArray(n)?n[t]:n)}return e}function hn(e,t){var n={}.toString.call(e);return n.indexOf("[object")===0&&n.indexOf(t+"]")>-1}function oi(e,t){return typeof e=="function"?e.apply(void 0,t):e}function zn(e,t){if(t===0)return e;var n;return function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function cr(e){return e.split(/\s+/).filter(Boolean)}function Ge(e){return[].concat(e)}function Jn(e,t){e.indexOf(t)===-1&&e.push(t)}function ur(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function dr(e){return e.split("-")[0]}function Ot(e){return[].slice.call(e)}function Yn(e){return Object.keys(e).reduce(function(t,n){return e[n]!==void 0&&(t[n]=e[n]),t},{})}function ht(){return document.createElement("div")}function Bt(e){return["Element","Fragment"].some(function(t){return hn(e,t)})}function fr(e){return hn(e,"NodeList")}function pr(e){return hn(e,"MouseEvent")}function hr(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function mr(e){return Bt(e)?[e]:fr(e)?Ot(e):Array.isArray(e)?e:Ot(document.querySelectorAll(e))}function cn(e,t){e.forEach(function(n){n&&(n.style.transitionDuration=t+"ms")})}function Xn(e,t){e.forEach(function(n){n&&n.setAttribute("data-state",t)})}function gr(e){var t,n=Ge(e),r=n[0];return r!=null&&(t=r.ownerDocument)!=null&&t.body?r.ownerDocument:document}function vr(e,t){var n=t.clientX,r=t.clientY;return e.every(function(o){var a=o.popperRect,d=o.popperState,l=o.props,s=l.interactiveBorder,c=dr(d.placement),u=d.modifiersData.offset;if(!u)return!0;var p=c==="bottom"?u.top.y:0,m=c==="top"?u.bottom.y:0,g=c==="right"?u.left.x:0,b=c==="left"?u.right.x:0,w=a.top-r+p>s,E=r-a.bottom-m>s,P=a.left-n+g>s,R=n-a.right-b>s;return w||E||P||R})}function un(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){e[r](o,n)})}function Gn(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var we={isTouch:!1},Kn=0;function br(){we.isTouch||(we.isTouch=!0,window.performance&&document.addEventListener("mousemove",si))}function si(){var e=performance.now();e-Kn<20&&(we.isTouch=!1,document.removeEventListener("mousemove",si)),Kn=e}function _r(){var e=document.activeElement;if(hr(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function yr(){document.addEventListener("touchstart",br,Ne),window.addEventListener("blur",_r)}var wr=typeof window<"u"&&typeof document<"u",qr=wr?!!window.msCrypto:!1;var Sr={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},$r={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},_e=Object.assign({appendTo:ri,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Sr,$r),Er=Object.keys(_e),Lr=function(t){var n=Object.keys(t);n.forEach(function(r){_e[r]=t[r]})};function ai(e){var t=e.plugins||[],n=t.reduce(function(r,o){var a=o.name,d=o.defaultValue;if(a){var l;r[a]=e[a]!==void 0?e[a]:(l=_e[a])!=null?l:d}return r},{});return Object.assign({},e,n)}function kr(e,t){var n=t?Object.keys(ai(Object.assign({},_e,{plugins:t}))):Er,r=n.reduce(function(o,a){var d=(e.getAttribute("data-tippy-"+a)||"").trim();if(!d)return o;if(a==="content")o[a]=d;else try{o[a]=JSON.parse(d)}catch{o[a]=d}return o},{});return r}function Qn(e,t){var n=Object.assign({},t,{content:oi(t.content,[e])},t.ignoreAttributes?{}:kr(e,t.plugins));return n.aria=Object.assign({},_e.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?t.interactive:n.aria.expanded,content:n.aria.content==="auto"?t.interactive?null:"describedby":n.aria.content},n}var xr=function(){return"innerHTML"};function fn(e,t){e[xr()]=t}function Zn(e){var t=ht();return e===!0?t.className=ni:(t.className=ii,Bt(e)?t.appendChild(e):fn(t,e)),t}function ei(e,t){Bt(t.content)?(fn(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?fn(e,t.content):e.textContent=t.content)}function pn(e){var t=e.firstElementChild,n=Ot(t.children);return{box:t,content:n.find(function(r){return r.classList.contains(ti)}),arrow:n.find(function(r){return r.classList.contains(ni)||r.classList.contains(ii)}),backdrop:n.find(function(r){return r.classList.contains(lr)})}}function li(e){var t=ht(),n=ht();n.className=ar,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=ht();r.className=ti,r.setAttribute("data-state","hidden"),ei(r,e.props),t.appendChild(n),n.appendChild(r),o(e.props,e.props);function o(a,d){var l=pn(t),s=l.box,c=l.content,u=l.arrow;d.theme?s.setAttribute("data-theme",d.theme):s.removeAttribute("data-theme"),typeof d.animation=="string"?s.setAttribute("data-animation",d.animation):s.removeAttribute("data-animation"),d.inertia?s.setAttribute("data-inertia",""):s.removeAttribute("data-inertia"),s.style.maxWidth=typeof d.maxWidth=="number"?d.maxWidth+"px":d.maxWidth,d.role?s.setAttribute("role",d.role):s.removeAttribute("role"),(a.content!==d.content||a.allowHTML!==d.allowHTML)&&ei(c,e.props),d.arrow?u?a.arrow!==d.arrow&&(s.removeChild(u),s.appendChild(Zn(d.arrow))):s.appendChild(Zn(d.arrow)):u&&s.removeChild(u)}return{popper:t,onUpdate:o}}li.$$tippy=!0;var Ar=1,Pt=[],dn=[];function Cr(e,t){var n=Qn(e,Object.assign({},_e,ai(Yn(t)))),r,o,a,d=!1,l=!1,s=!1,c=!1,u,p,m,g=[],b=zn(vt,n.interactiveDebounce),w,E=Ar++,P=null,R=ur(n.plugins),C={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},f={id:E,reference:e,popper:ht(),popperInstance:P,props:n,state:C,plugins:R,clearDelayTimeouts:qt,setProps:St,setContent:$t,show:di,hide:fi,hideWithInteractivity:pi,enable:tt,disable:wt,unmount:hi,destroy:mi};if(!n.render)return f;var T=n.render(f),y=T.popper,O=T.onUpdate;y.setAttribute("data-tippy-root",""),y.id="tippy-"+f.id,f.popper=y,e._tippy=f,y._tippy=f;var W=R.map(function(v){return v.fn(f)}),U=e.hasAttribute("aria-expanded");return Fe(),L(),z(),J("onCreate",[f]),n.showOnCreate&&et(),y.addEventListener("mouseenter",function(){f.props.interactive&&f.state.isVisible&&f.clearDelayTimeouts()}),y.addEventListener("mouseleave",function(){f.props.interactive&&f.props.trigger.indexOf("mouseenter")>=0&&Z().addEventListener("mousemove",b)}),f;function N(){var v=f.props.touch;return Array.isArray(v)?v:[v,0]}function F(){return N()[0]==="hold"}function V(){var v;return!!((v=f.props.render)!=null&&v.$$tippy)}function B(){return w||e}function Z(){var v=B().parentNode;return v?gr(v):document}function A(){return pn(y)}function M(v){return f.state.isMounted&&!f.state.isVisible||we.isTouch||u&&u.type==="focus"?0:ln(f.props.delay,v?0:1,_e.delay)}function z(v){v===void 0&&(v=!1),y.style.pointerEvents=f.props.interactive&&!v?"":"none",y.style.zIndex=""+f.props.zIndex}function J(v,S,j){if(j===void 0&&(j=!0),W.forEach(function(D){D[v]&&D[v].apply(D,S)}),j){var H;(H=f.props)[v].apply(H,S)}}function se(){var v=f.props.aria;if(v.content){var S="aria-"+v.content,j=y.id,H=Ge(f.props.triggerTarget||e);H.forEach(function(D){var ae=D.getAttribute(S);if(f.state.isVisible)D.setAttribute(S,ae?ae+" "+j:j);else{var ce=ae&&ae.replace(j,"").trim();ce?D.setAttribute(S,ce):D.removeAttribute(S)}})}}function L(){if(!(U||!f.props.aria.expanded)){var v=Ge(f.props.triggerTarget||e);v.forEach(function(S){f.props.interactive?S.setAttribute("aria-expanded",f.state.isVisible&&S===B()?"true":"false"):S.removeAttribute("aria-expanded")})}}function _(){Z().removeEventListener("mousemove",b),Pt=Pt.filter(function(v){return v!==b})}function q(v){if(!(we.isTouch&&(s||v.type==="mousedown"))){var S=v.composedPath&&v.composedPath()[0]||v.target;if(!(f.props.interactive&&Gn(y,S))){if(Ge(f.props.triggerTarget||e).some(function(j){return Gn(j,S)})){if(we.isTouch||f.state.isVisible&&f.props.trigger.indexOf("click")>=0)return}else J("onClickOutside",[f,v]);f.props.hideOnClick===!0&&(f.clearDelayTimeouts(),f.hide(),l=!0,setTimeout(function(){l=!1}),f.state.isMounted||K())}}}function k(){s=!0}function x(){s=!1}function I(){var v=Z();v.addEventListener("mousedown",q,!0),v.addEventListener("touchend",q,Ne),v.addEventListener("touchstart",x,Ne),v.addEventListener("touchmove",k,Ne)}function K(){var v=Z();v.removeEventListener("mousedown",q,!0),v.removeEventListener("touchend",q,Ne),v.removeEventListener("touchstart",x,Ne),v.removeEventListener("touchmove",k,Ne)}function he(v,S){He(v,function(){!f.state.isVisible&&y.parentNode&&y.parentNode.contains(y)&&S()})}function ye(v,S){He(v,S)}function He(v,S){var j=A().box;function H(D){D.target===j&&(un(j,"remove",H),S())}if(v===0)return S();un(j,"remove",p),un(j,"add",H),p=H}function Le(v,S,j){j===void 0&&(j=!1);var H=Ge(f.props.triggerTarget||e);H.forEach(function(D){D.addEventListener(v,S,j),g.push({node:D,eventType:v,handler:S,options:j})})}function Fe(){F()&&(Le("touchstart",Ke,{passive:!0}),Le("touchend",bt,{passive:!0})),cr(f.props.trigger).forEach(function(v){if(v!=="manual")switch(Le(v,Ke),v){case"mouseenter":Le("mouseleave",bt);break;case"focus":Le(qr?"focusout":"blur",Qe);break;case"focusin":Le("focusout",Qe);break}})}function gt(){g.forEach(function(v){var S=v.node,j=v.eventType,H=v.handler,D=v.options;S.removeEventListener(j,H,D)}),g=[]}function Ke(v){var S,j=!1;if(!(!f.state.isEnabled||Ze(v)||l)){var H=((S=u)==null?void 0:S.type)==="focus";u=v,w=v.currentTarget,L(),!f.state.isVisible&&pr(v)&&Pt.forEach(function(D){return D(v)}),v.type==="click"&&(f.props.trigger.indexOf("mouseenter")<0||d)&&f.props.hideOnClick!==!1&&f.state.isVisible?j=!0:et(v),v.type==="click"&&(d=!j),j&&!H&&Ce(v)}}function vt(v){var S=v.target,j=B().contains(S)||y.contains(S);if(!(v.type==="mousemove"&&j)){var H=ke().concat(y).map(function(D){var ae,ce=D._tippy,Ve=(ae=ce.popperInstance)==null?void 0:ae.state;return Ve?{popperRect:D.getBoundingClientRect(),popperState:Ve,props:n}:null}).filter(Boolean);vr(H,v)&&(_(),Ce(v))}}function bt(v){var S=Ze(v)||f.props.trigger.indexOf("click")>=0&&d;if(!S){if(f.props.interactive){f.hideWithInteractivity(v);return}Ce(v)}}function Qe(v){f.props.trigger.indexOf("focusin")<0&&v.target!==B()||f.props.interactive&&v.relatedTarget&&y.contains(v.relatedTarget)||Ce(v)}function Ze(v){return we.isTouch?F()!==v.type.indexOf("touch")>=0:!1}function _t(){yt();var v=f.props,S=v.popperOptions,j=v.placement,H=v.offset,D=v.getReferenceClientRect,ae=v.moveTransition,ce=V()?pn(y).arrow:null,Ve=D?{getBoundingClientRect:D,contextElement:D.contextElement||B()}:e,mn={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Et){var Ue=Et.state;if(V()){var gi=A(),Nt=gi.box;["placement","reference-hidden","escaped"].forEach(function(Lt){Lt==="placement"?Nt.setAttribute("data-placement",Ue.placement):Ue.attributes.popper["data-popper-"+Lt]?Nt.setAttribute("data-"+Lt,""):Nt.removeAttribute("data-"+Lt)}),Ue.attributes.popper={}}}},Te=[{name:"offset",options:{offset:H}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!ae}},mn];V()&&ce&&Te.push({name:"arrow",options:{element:ce,padding:3}}),Te.push.apply(Te,S?.modifiers||[]),f.popperInstance=an(Ve,y,Object.assign({},S,{placement:j,onFirstUpdate:m,modifiers:Te}))}function yt(){f.popperInstance&&(f.popperInstance.destroy(),f.popperInstance=null)}function qe(){var v=f.props.appendTo,S,j=B();f.props.interactive&&v===ri||v==="parent"?S=j.parentNode:S=oi(v,[j]),S.contains(y)||S.appendChild(y),f.state.isMounted=!0,_t()}function ke(){return Ot(y.querySelectorAll("[data-tippy-root]"))}function et(v){f.clearDelayTimeouts(),v&&J("onTrigger",[f,v]),I();var S=M(!0),j=N(),H=j[0],D=j[1];we.isTouch&&H==="hold"&&D&&(S=D),S?r=setTimeout(function(){f.show()},S):f.show()}function Ce(v){if(f.clearDelayTimeouts(),J("onUntrigger",[f,v]),!f.state.isVisible){K();return}if(!(f.props.trigger.indexOf("mouseenter")>=0&&f.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(v.type)>=0&&d)){var S=M(!1);S?o=setTimeout(function(){f.state.isVisible&&f.hide()},S):a=requestAnimationFrame(function(){f.hide()})}}function tt(){f.state.isEnabled=!0}function wt(){f.hide(),f.state.isEnabled=!1}function qt(){clearTimeout(r),clearTimeout(o),cancelAnimationFrame(a)}function St(v){if(!f.state.isDestroyed){J("onBeforeUpdate",[f,v]),gt();var S=f.props,j=Qn(e,Object.assign({},S,Yn(v),{ignoreAttributes:!0}));f.props=j,Fe(),S.interactiveDebounce!==j.interactiveDebounce&&(_(),b=zn(vt,j.interactiveDebounce)),S.triggerTarget&&!j.triggerTarget?Ge(S.triggerTarget).forEach(function(H){H.removeAttribute("aria-expanded")}):j.triggerTarget&&e.removeAttribute("aria-expanded"),L(),z(),O&&O(S,j),f.popperInstance&&(_t(),ke().forEach(function(H){requestAnimationFrame(H._tippy.popperInstance.forceUpdate)})),J("onAfterUpdate",[f,v])}}function $t(v){f.setProps({content:v})}function di(){var v=f.state.isVisible,S=f.state.isDestroyed,j=!f.state.isEnabled,H=we.isTouch&&!f.props.touch,D=ln(f.props.duration,0,_e.duration);if(!(v||S||j||H)&&!B().hasAttribute("disabled")&&(J("onShow",[f],!1),f.props.onShow(f)!==!1)){if(f.state.isVisible=!0,V()&&(y.style.visibility="visible"),z(),I(),f.state.isMounted||(y.style.transition="none"),V()){var ae=A(),ce=ae.box,Ve=ae.content;cn([ce,Ve],0)}m=function(){var Te;if(!(!f.state.isVisible||c)){if(c=!0,y.offsetHeight,y.style.transition=f.props.moveTransition,V()&&f.props.animation){var Mt=A(),Et=Mt.box,Ue=Mt.content;cn([Et,Ue],D),Xn([Et,Ue],"visible")}se(),L(),Jn(dn,f),(Te=f.popperInstance)==null||Te.forceUpdate(),J("onMount",[f]),f.props.animation&&V()&&ye(D,function(){f.state.isShown=!0,J("onShown",[f])})}},qe()}}function fi(){var v=!f.state.isVisible,S=f.state.isDestroyed,j=!f.state.isEnabled,H=ln(f.props.duration,1,_e.duration);if(!(v||S||j)&&(J("onHide",[f],!1),f.props.onHide(f)!==!1)){if(f.state.isVisible=!1,f.state.isShown=!1,c=!1,d=!1,V()&&(y.style.visibility="hidden"),_(),K(),z(!0),V()){var D=A(),ae=D.box,ce=D.content;f.props.animation&&(cn([ae,ce],H),Xn([ae,ce],"hidden"))}se(),L(),f.props.animation?V()&&he(H,f.unmount):f.unmount()}}function pi(v){Z().addEventListener("mousemove",b),Jn(Pt,b),b(v)}function hi(){f.state.isVisible&&f.hide(),f.state.isMounted&&(yt(),ke().forEach(function(v){v._tippy.unmount()}),y.parentNode&&y.parentNode.removeChild(y),dn=dn.filter(function(v){return v!==f}),f.state.isMounted=!1,J("onHidden",[f]))}function mi(){f.state.isDestroyed||(f.clearDelayTimeouts(),f.unmount(),gt(),delete e._tippy,f.state.isDestroyed=!0,J("onDestroy",[f]))}}function mt(e,t){t===void 0&&(t={});var n=_e.plugins.concat(t.plugins||[]);yr();var r=Object.assign({},t,{plugins:n}),o=mr(e);if(0)var a,d;var l=o.reduce(function(s,c){var u=c&&Cr(c,r);return u&&s.push(u),s},[]);return Bt(e)?l[0]:l}mt.defaultProps=_e;mt.setDefaultProps=Lr;mt.currentInput=we;var Vl=Object.assign({},at,{effect:function(t){var n=t.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});mt.setDefaultProps({render:li});var ci=mt;ql.labsTaken=function(){function e(){return $(".labs_taken_partial").length>0?$(".labs_taken_partial").data("translation"):(console.log("Warning: could not find labs_taken translations"),{})}function t(o,a,d){var l,s=e();if(l="<p><strong>"+s.not_available+"</strong></p>",o.total_score!=null){for(l="<div id='assessment-popover'>",i=0;i<o.step_points.length;i++){if(l+="<div class='row'>",l+="<div class='assessment-steps'>",l+="<div class='row'>",l+="<span class='span1 step-no'>"+(i+1)+"</span>",l+="<span class='span2 step-title'>"+o.step_titles[i]+"</span>",o.completion_only==!0){var c="icon-remove";o.step_points[i]!=""&&o.step_points[i]==o.step_scores[i]&&(c="icon-ok"),l+="<span class='span1 step-score'><i class='"+c+"'></i></span>"}else o.step_points[i]==""?l+="<span class='span1 step-score'>"+o.step_scores[i]+"</span>":l+="<span class='span1 step-score'>"+o.step_scores[i]+"/"+o.step_points[i]+"</span>";l+="</div></div></div>"}l+="<div class='row'>",l+="<div class='assessment-steps'>",l+="<div class='row'>",l+="<span class='span2 total-score'>",o.completion_only==!0?l+=s.complete:l+=s.total,l+="</span>",l+="<span class='span1 step-final'>",o.completion_only==!0?l+=o.completed_steps+"/"+o.total_steps:l+=o.total_score+"/"+o.perfect_score,l+="</span></div></div></div>"}ci(document.querySelector("#lab-instance-tooltip-"+$(this).data("labinstance")),{trigger:"manual",allowHTML:!0,content:l,interactive:!0,placement:"right"}).show()}function n(o){var a=$(this).data("labinstance");return $.ajax({url:"/lab_instances/assessment/"+a+".json",context:this,error:function(d,l,s){console.log("Assessment Details ajax fail: ["+l+"/"+s+"]")},success:t}),!1}function r(){$(".labs_taken_partial").length>0&&$('[data-toggle="popover"]').on("click",n)}return{init:r}}();clickCheckbox=function(e){let t="program_group_learning_plans_"+e;document.getElementById(t).hasAttribute("checked")?document.getElementById(t).removeAttribute("checked"):document.getElementById(t).setAttribute("checked","true")};ql.learningPlanEdit=(()=>{function e(){ql.sortable.init(".learnable-position-field");let r=document.querySelectorAll("ql-activity-card ql-toggle-button");for(button of r)button.addEventListener("click",t)}function t(r){let o=this.dataset.itemid,a=document.querySelector(`.destroy-${o}-field`);a&&(a.value==="false"?(a.value="true",this.parentElement.disabled=!0):(a.value="false",this.parentElement.disabled=!1))}function n(r){if(r.files&&r.files[0]){let o=new FileReader,a=document.querySelector("ql-learning-plan-card");o.onload=d=>{a.setAttribute("imagesrc",d.target.result)},o.readAsDataURL(r.files[0])}}return{init:e,update_image_preview:n}})();ql.learningTree={info:function(){function e(){let t=document.querySelector("#drawer-container"),n=document.querySelector("#learning-tree-info-drawer");n.addEventListener("toggle",r=>{r.target===n&&(r.detail.on?t.classList.add("info-drawer-opened"):t.classList.remove("info-drawer-opened"))});for(let r of document.querySelectorAll(".js-close-learning-tree-info"))r.addEventListener("click",()=>{n.hide()})}return{init:e}}()};ql.list=function(){function e(){document.querySelectorAll(".js-list-item").forEach(r=>{$expandToggle=r.querySelector(".js-list-item-expand"),$expandToggle.addEventListener("click",t,!1)})}function t(n){$listItem=this.closest(".js-list-item"),$listItemDetails=$listItem.querySelector(".js-list-item-details"),$listItem.classList.toggle("is-expanded");let r=this.offsetHeight+$listItemDetails.offsetHeight;$listItem.style.height=`${r}px`}return{init:e}}();ql.MaterialDialog=function(e,t){this.dialog=e,this.dismissers=$(this.dialog).find("[data-dismiss]"),this.isOpen=t||!1,this.listen(),this.upgrade(),this.render()};ql.MaterialDialog.prototype.upgrade=function(){$(this.dialog).addClass("is-upgraded")};ql.MaterialDialog.prototype.listen=function(){for(var e=0;e<this.dismissers.length;e++)this.dismissers[e].addEventListener("click",this.close.bind(this))};ql.MaterialDialog.prototype.close=function(){this.isOpen=!1,this.render()};ql.MaterialDialog.prototype.open=function(){this.isOpen=!0,this.render()};ql.MaterialDialog.prototype.render=function(){this.isOpen?$(this.dialog).addClass("is-open"):$(this.dialog).removeClass("is-open")};ql.MaterialInput=function(e){this.input=e,this.wrapper=this.input.parentElement.parentElement,this.isFilled=!!this.input.value,this.isValid=!0,this.listen(),this.upgrade()};ql.MaterialInput.prototype.listen=function(){this.input.addEventListener("input",this.setAndRender.bind(this)),this.input.addEventListener("blur",this.setAndRender.bind(this))};ql.MaterialInput.prototype.upgrade=function(){$(this.input).addClass("is-upgraded")};ql.MaterialInput.prototype.setAndRender=function(){this.setAttributes(),this.isFilled?$(this.input).addClass("is-filled"):$(this.input).removeClass("is-filled"),this.isValid?$(this.wrapper).removeClass("has-error"):$(this.wrapper).addClass("has-error")};ql.MaterialInput.prototype.setAttributes=function(){this.setIsFilled(),this.setIsValid()};ql.MaterialInput.prototype.setIsFilled=function(){this.isFilled=!!this.input.value};ql.MaterialInput.prototype.setIsValid=function(){this.isValid=this.input.validity.valid};ql.initMaterialInputs=function(e){if(e=e||[],e.length)var t=e.find(".md-input__input");else var t=document.getElementsByClassName("md-input__input");for(var n=0;n<t.length;n++)$(t[n]).hasClass("is-upgraded")||new ql.MaterialInput(t[n])};ql.myAccount={validateInputField:function(e,t,n,r){e.validity.valid?t.style.display="none":(t.textContent=e.validationMessage,t.style.display="block",n.disabled=!1,r.preventDefault())},validateChangeEmail:function(e){let t=document.querySelector("#user_email"),n=document.querySelector("#change-email-current-password"),r=document.querySelector("#change-email-new-email-error"),o=document.querySelector("#change-email-current-password-error"),a=e.target.querySelector(".button"),d=t.validity.valid&&n.validity.valid;return a.disabled=!0,this.validateInputField(t,r,a,e),this.validateInputField(n,o,a,e),d},validateChangePassword:function(e){let t=document.querySelector("#change-password-current-password"),n=document.querySelector("#user_password"),r=document.querySelector("#user_password_confirmation"),o=document.querySelector("#change-password-current-password-error"),a=document.querySelector("#change-password-new-password-error"),d=document.querySelector("#change-password-confirm-password-error"),l=e.target.querySelector(".button"),s=t.validity.valid&&n.validity.valid&&r.validity.valid;return l.disabled=!0,this.validateInputField(t,o,l,e),this.validateInputField(n,a,l,e),this.validateInputField(r,d,l,e),s}};ql.modals=function(){function e(){$(".modal[data-show]").modal("show"),$(".modal[data-modal-shown-path]").on("show.bs.modal",function(){$.get(this.dataset.modalShownPath)}).modal("show"),document.addEventListener("openModal",t)}function t(n){if(modal=document.getElementById(n.detail.modal),!modal)throw new Error(`Modal with id ${n.detail.modal} not found.`);typeof modal.open=="function"?modal.open():$(modal).modal("show")}return{init:e}}();ql.activityReportModal=function(){function e(t){let n=t.split("_")[0];$("#activity_report_date_range_picker").flatpickr({mode:"range",locale:n,onChange:function(r){if(r.length===2){let o=this.formatDate(r[0],"Y-m-d"),a=this.formatDate(r[1],"Y-m-d");$("#activity_report_date_range").val(`${o}_${a}`)}}})}return{init:e}}();initCheckboxOpenModal=function(){$(".js-enable-checkbox-open-modal").on("click",function(e){if($(e.currentTarget).find('input[type="checkbox"]').attr("newCheck")){$(e.currentTarget).find('input[type="checkbox"]').attr("checked")?$(e.currentTarget).find('input[type="checkbox"]').removeAttr("checked"):$(e.currentTarget).find('input[type="checkbox"]').attr("checked","true");return}if($(e.currentTarget).find('input[type="checkbox"]').attr("checked")){let t=$(e.currentTarget).find('input[type="checkbox"]').prop("id"),n=document.getElementById("deactivate-modal"),r=n.getElementsByClassName("js-enable-checkbox-open-modal-submit")[0];$(e.currentTarget).attr("on","true"),r.setAttribute("checkboxId",t),n.open()}else $(e.currentTarget).find('input[type="checkbox"]')&&($(e.currentTarget).find('input[type="checkbox"]').attr("newCheck","true"),$(e.currentTarget).find('input[type="checkbox"]').attr("checked","true"))}),$(".js-enable-checkbox-open-modal-submit").on("click",function(e){let t=$(e.currentTarget).attr("checkboxId");document.getElementById(t).setAttribute("newCheck","true"),document.getElementById("deactivate-modal").close(),document.getElementById(t).click()})};ql.navPanel=function(){let e;function t(){e=document.querySelector(".js-nav-panel"),document.querySelectorAll(".js-nav-toggle").forEach(o=>o.addEventListener("click",n))}function n(r){r.preventDefault(),e.classList.toggle("is-open"),ql.track("Side navigation toggled",{category:"Navigation"})}return{init:t}}();ql.navigation=function(){let e;function t(){e=document.querySelectorAll(".js-navigation-button"),e.forEach(r=>{r.addEventListener("click",n,!1)})}function n(r){ql.track("Navigation link clicked",{category:"Navigation",label:this.title})}return{init:t}}();ql.initNewLabWindowListener=function(){$(window).resize(function(){ql.setHorizontal()})};ql.setHorizontal=function(){$(window).width()<600?($(".md-input").removeClass("md-input--horizontal"),$(".js-permissions-select").removeClass("permissions-select__container--horizontal"),$(".js-labs-resources").removeClass("labs__resources--horizontal")):($(".md-input").addClass("md-input--horizontal"),$(".js-student-resources .md-input").removeClass("md-input--horizontal"),$(".js-permissions-select").addClass("permissions-select__container--horizontal"),$(".js-labs-resources").addClass("labs__resources--horizontal"))};ql.initNewStudentResourceListener=function(){$(document).on("nested:fieldAdded",function(e){for(var t=e.field.find(".md-input__input"),n=0;n<t.length;n++)new ql.MaterialInput(t[n])})};ql.initInstructionRemovedListener=function(){$(document).on("nested:fieldRemoved",function(e){e.field.next(".js-add-instruction").click()})};ql.initNewLabLocale=function(){ql.initNewLabLocaleButtonListener(),ql.initNewLabLocaleSubmitListener()};ql.initNewLabLocaleButtonListener=function(){$(".js-new-lab-locale-button").on("ajax:success",function(e,t,n,r){$(".js-new-lab-locale").html(r.responseText),ql.initMaterialInputs($(".js-new-lab-locale")),ql.newLabLocaleDialog=new ql.MaterialDialog($(".js-dialog"),!0)})};ql.initNewLabLocaleSubmitListener=function(){$(document).on("ajax:success","form",function(e,t,n,r){ql.newLabLocaleDialog.close(),$(".js-lab-locales-table").find(".flex-table__row:nth-child(1)").after(r.responseText),$(".js-lab-locales-table").find(".flex-table__row:nth-child(2)").addClass("is-new")}).on("ajax:error","form",function(e,t,n,r){console.log("aww")})};ql.organizations=(()=>{let e,t;function n(){e=document.querySelector(".metadata-pairs"),t=e.firstElementChild.cloneNode(!0),document.querySelector(".js-add-item").addEventListener("click",r)}function r(){let a=t.cloneNode(!0),d=new Date().getTime();a.id=`metadata-pair-${d}`,a.children[0].firstElementChild.value="",a.children[0].firstElementChild.id=`metadata-array-key-${d}`,a.children[0].firstElementChild.setAttribute("aria-label",`metadata-array-key-${d}`),a.children[1].firstElementChild.value="",a.children[1].firstElementChild.id=`metadata-array-value-${d}`,a.children[1].firstElementChild.setAttribute("aria-label",`metadata-array-value-${d}`),a.children[2].firstElementChild.setAttribute("onclick",`ql.organizations.removePair('${a.id}')`),e.appendChild(a)}function o(a){let d=document.getElementById(a);d.parentNode.removeChild(d)}return{init:n,removePair:o}})();ql.pagination=function(){let e="";function t(){n(),r()}function n(){e=document.querySelectorAll(".js-pagination select")}function r(){e.forEach(a=>{a.addEventListener("change",o)})}function o(a){if(a.preventDefault(),this.value&&"URLSearchParams"in window){let d=new URLSearchParams(window.location.search);d.set(this.name,this.value),window.location.search=d.toString()}}return{init:t}}();var Tr=function(){$(".js-purchase-option").first().prop("checked",!0)},jr=function(){$(".js-purchase-option").change(function(){$(".js-purchase-option").siblings(".js-purchase-option-details").removeClass("is-selected"),$(this).siblings(".js-purchase-option-details").addClass("is-selected"),Dt(),$(this).hasClass("js-other-credit")||$(".js-other-credit").prop("disabled",!0)})},Ir=function(){$(".js-other-option").change(function(){$(".js-other-credit").prop("disabled",!1).focus()})},Rr=function(){$(".js-other-credit").on("keyup mouseup change",function(){$(".js-other-option").val($(this).val()),Dt()})};initCreditsQuantityInputListener=function(){$(".js-credits-quantity-input").on("keyup mouseup change",function(){var e=$(".js-payments-paths").data("calculate-total-path"),t=$(this).val().trim(),n=$.get(e,{quantity:t,product_code:"credit",round:!0},null,"json");n.success(function(r){$(".js-payment-total").html(r.price),$(".js-payment-total").data("price_in_cents",r.price_in_cents),r.discount?$(".js-payment-discount").html(r.discount):$(".js-payment-discount").html("")})})};var Pr=function(){$(".js-add-promo-code-button").click(function(e){e.preventDefault();var t=$(".js-purchase-option:checked"),n=t.val().trim(),r=t.data("product-code"),o=$(".js-promo-code").val().trim(),a=$(".js-payments-paths").data("validate-promo-code-path");if(o==null||o==") && (quantity == null || quantity == ")return!1;var d=$.get(a,{uuid:o,credits:n,product_code:r},null,"html");d.success(function(l){$(".js-payment-details").html(l),$("#payment_details_modal").modal("show"),ui(),Dt()})})},ui=function(){$("#redeem_now").click(function(){redeemNowUrl=$(".js-payments-paths").data("redeem-now-path"),promoCode=$(".js-promo-code").val().trim(),$.post(redeemNowUrl,{uuid:promoCode}).fail(function(e){alert("Redeem call failed: "+e.responseText)}).done(function(e){window.location.href=e})})},Dt=function(){var e=$(".js-purchase-option:checked"),t=e.val().trim(),n=e.data("product-code"),r=$(".js-promo-code").val().trim(),o=e.data("course-id"),a=$(".js-payments-paths").data("calculate-total-path"),d=$.get(a,{quantity:t,product_code:n,promo_code:r,course_id:o},null,"json");d.success(function(l){l.full_price.subtotal?($(".js-payment-sub-total").html(l.full_price.subtotal),$(".js-payment-tax").html(l.full_price.tax),$(".js-payment-total").html(l.full_price.total),$(".js-payment-total").data("price_in_cents",l.price_in_cents)):($(".js-payment-total").html(l.price),$(".js-payment-total").data("price_in_cents",l.price_in_cents))})};initStripeButton=function(){if($(".js-stripe-button").length){var e=$(".js-stripe-button").data("currency"),t=e==="usd"||e==="cny",n=StripeCheckout.configure({key:$(".js-stripe-button").data("key"),currency:$(".js-stripe-button").data("currency"),alipay:t,locale:"auto",token:function(a){var d=$(".js-purchase-option:checked"),l=d.val().trim(),s=d.data("product-code"),c=$(".js-promo-code").val().trim(),u=$(".js-stripe-button").data("process-path"),p=d.data("courseId"),m=$.post(u,{stripeEmail:a.email,stripeToken:a.id,quantity:l,promo_code:c,product_code:s,course_id:p,referrer:$(".js-stripe-button").data("referrer").trim()});m.fail(function(g){console.log("Stripe call failed: "+g)}).done(function(g){window.location.href=g})}});$(".js-stripe-button").on("click",function(a){a.preventDefault();var d=$(".js-purchase-option:checked"),l=d.val().trim(),s=d.data("product-code"),c=$(".js-promo-code").val().trim(),u=d.data("course-id"),p=$(".js-payments-paths").data("validate-path");$.post(p,{quantity:l,promo_code:c,product_code:s,course_id:u}).fail(function(m){$(".js-payment-details").html(m.responseText),$("#payment_details_modal").modal("show"),ui()}).done(function(m){var g=$(".js-payments-paths").data("calculate-total-path");$.get(g,{quantity:l,promo_code:c,product_code:s,course_id:u},null,"json").success(function(b){console.log(Or(l,s)),typeof analytics<"u"&&(analytics.track("payment",{product_code:s,promo_code:c,currency:e,quantity:l,amount:b.price_in_cents}),console.log("payment event sent")),n.open({description:b.title,amount:b.price_in_cents})})})}),$(window).on("popstate",function(){n.close()})}var r=$(".js-change-credit-card");if(r.length){var o=StripeCheckout.configure({key:r.data("key"),locale:"auto",token:function(a){var d=r.data("process-path"),l=$.post(d,{stripeToken:a.id,referrer:r.data("referrer").trim()});l.fail(function(s){console.log("Stripe call failed: "+s)}).done(function(s){window.location.href=s})}});r.on("click",function(a){a.preventDefault(),o.open({description:"Update Card Details",panelLabel:"Update Card Details"}),$(window).on("popstate",function(){o.close()})})}};var Or=function(e,t){return e==1?e+" "+t:e+" "+t+"s"};initPayments=function(){Tr(),Dt(),jr(),Ir(),Rr(),Pr(),initStripeButton()};ql.promptResponseForm=function(){function e(t,n){let r=document.getElementById(`prompt-${t}-tab-group`);if(r){let o=r.shadowRoot.querySelectorAll("ql-tab"),a=r.shadowRoot.querySelectorAll("slot"),d=document.getElementById(`prompt-${t}-response-type-input`);if(o.length!=a.length||d===null)return;o.forEach((l,s)=>{l.addEventListener("click",c=>{d.value=n[s],a.forEach((u,p)=>{let m=u.assignedElements()[0].querySelector(`.prompt-${t}-input`);s!=p?(m.value="",m.required=!1):m.required=!0})})})}}return{initTab:e}}();ql.peerReviewSubmission=function(){function e(r,o){let a=document.getElementById(r),d=Array.from(document.getElementsByClassName(o));a&&(d.forEach(l=>{l.addEventListener("chosenOption",s=>{t(a,d)}),l.addEventListener("changedResponse",s=>{t(a,d)})}),a.addEventListener("click",l=>{a.disabled=!0,d.forEach(s=>s.submit())}))}function t(r,o){r.disabled=!n(o)}function n(r){return r.every(o=>o.isReadyForSubmission())}return{init:e}}();ql.drawer=function(){function e(t){let n=document.getElementById(t);n&&n.toggle()}return{toggle:e}}();ql.Permissions=function(e){var t=this;this.button=e,this.menu=new ql.PermissionsMenu($('ul[for="'+this.button.attr("id")+'"]')),this.overlay=$('aside[for="'+this.button.attr("id")+'"]'),this.permissions=this.button.data("permissions"),this.menu.setPermissions=function(n){t.setPermissions(n)},this.button.click(function(n){t.menu.isVisible=!0,t.render()}),this.overlay.click(function(n){t.menu.isVisible=!1,t.render()}),this.render()};ql.Permissions.prototype.setPermissions=function(e){var t=this.permissions.indexOf(e);t>=0?this.permissions.splice(t,1):this.permissions.push(e),$(".js-permissions-input").val(this.permissions.join(`\r
`)),this.render()};ql.Permissions.prototype.render=function(){for(var e=[],t=0;t<this.permissions.length;t++)e.push("<span>"+this.permissions[t]+"</span>");this.button.find("#permissions-display").html(e),this.menu.render()};ql.PermissionsMenu=function(e){var t=this;this.element=e,this.isVisible=!1,this.setPermissions="",this.categories=[];for(var n=this.element.children("li"),r=0;r<n.length;r++)this.categories.push(new ql.PermissionsMenuCategory($(n[r]))),this.categories[r].setPermissions=function(o){t.setPermissions(o)}};ql.PermissionsMenu.prototype.render=function(){this.isVisible?this.element.addClass("is-visible"):this.element.removeClass("is-visible");for(var e=0;e<this.categories.length;e++)this.categories[e].render()};ql.PermissionsMenuCategory=function(e){var t=this;this.element=e,this.isSelected=!1,this.setPermissions="",this.items=[];for(var n=this.element.find("[data-permission]"),r=0;r<n.length;r++)this.items.push(new ql.PermissionsMenuItem($(n[r]))),this.items[r].setPermissions=function(o){t.setPermissions(o)}};ql.PermissionsMenuCategory.prototype.setSelected=function(){this.isSelected=!1;for(var e=0;e<this.items.length;e++)this.items[e].isSelected&&(this.isSelected=!0)};ql.PermissionsMenuCategory.prototype.render=function(){this.setSelected(),this.isSelected?this.element.addClass("is-selected"):this.element.removeClass("is-selected");for(var e=0;e<this.items.length;e++)this.items[e].render()};ql.PermissionsMenuItem=function(e){var t=this;this.element=e,this.isSelected=this.element[0].hasAttribute("data-selected"),this.permission=e.data("permission"),this.setPermissions="",this.element.click(function(n){t.isSelected=!t.isSelected,t.setPermissions(t.permission)})};ql.PermissionsMenuItem.prototype.render=function(){this.isSelected?this.element.addClass("is-selected"):this.element.removeClass("is-selected")};ql.initPublishModal=function(){$("#publish_modal").on("show.bs.modal",function(){ql.updatePublishModal(),setInterval(ql.updatePublishModal,5*1e3)}).modal()};ql.updatePublishModal=function(){console.log("updating publish modal");let e=$(".js-status").data("lab-id"),t=$(".js-status").data("url");$.get(t).done(function(r){r.status=="done"?window.location.href="/labs/"+e+"/snapshots/new":($("#snapshotJobModal .status").html("["+r.id+"] "+r.status),r.message!=null&&$("#snapshotJobModal .message").html(r.message))})};ql.quest={analytics:function(){function e(){let t={questName:gon.learning_path_name,label:gon.learning_path_name,category:"Quest",deployment:gon.deployment},n=document.querySelectorAll(".js-quest-enroll-button"),r=document.querySelectorAll(".js-quest-unenroll-button");document.querySelectorAll(".js-catalog-item-title a").forEach(a=>a.addEventListener("click",d=>{ql.track("clicked_quest_activity_link",{label:d.target.innerText,type:d.target.dataset.type})},!1));for(let a of n)a.addEventListener("click",()=>{ql.track("clicked_quest_enroll_button",t)});for(let a of r)r.addEventListener("click",()=>{ql.track("clicked_quest_unenroll_button",t)})}return{init:e}}()};initSearchAutocomplete=function(){jQuery.ui.autocomplete.prototype._resizeMenu=function(){var e=this.menu.element;e.outerWidth(this.element.outerWidth())},$(".js-autocomplete").length>0&&$.getJSON("/searches/autocomplete.json",function(e){window.SEARCH_AUTOCOMPLETE_DISABLED||(e=e.map($.trim).sort(function(t,n){return t.localeCompare(n)}),$(".js-autocomplete").autocomplete({source:e,select:function(t,n){$(this).val(n.item.value),$(this).parents("form").submit()}}))})};disableSearchAutocomplete=function(){$(".js-autocomplete").autocomplete("instance")&&$(".js-autocomplete").autocomplete("disable")};initSearch=function(){initSearchAutocomplete(),$searchInput=document.getElementById("keywords"),$searchInput&&$searchInput.addEventListener("keydown",e=>{e.isComposing||e.keyCode!=13||ql.track("searched",{label:e.target.value})})};$(function(){function e(){let t=ql.experiments.getActiveExperiments().map(n=>`${n.optimize_id}.${n.variant_index}`).join("!")}});ql.selectAll=function(){let e,t;function n(o,a){e=document.querySelector(o),t=document.querySelectorAll(a),e&&e.addEventListener("click",r,!1)}function r(o){t.forEach(a=>{a.checked=e.checked})}return{init:n}}();ql.snippetListLocaleEdit=(()=>{let e;function t(){document.querySelector(".js-item-count").innerText=e}function n(){for(let[a,d]of itemLists.entries()){let l=document.createElement("li"),s=document.createElement("textarea"),c=new Date().getTime();s.id=`snippet_snippet_list_locales_attributes_${a}_snippet_list_locale_items_attributes_${c}_snippet_text`,s.name=`snippet[snippet_list_locales_attributes][${a}][snippet_list_locale_items_attributes][${c}][snippet_text]`,s.classList.add("text","optional"),l.appendChild(s),d.appendChild(l)}e++,t()}function r(){if(!(e<=0)){for(let a of itemLists){let d=a.querySelectorAll("li:not(.destroyed)"),l=d[d.length-1];if(l){let s=l.querySelector(".input-destroy");s?(s.value="1",l.style.display="none",l.classList.add("destroyed")):a.removeChild(l)}}e--,t()}}function o(){itemLists=Array.from(document.querySelectorAll(".list-locale-items")),e=itemLists[0].querySelectorAll("li").length,document.querySelector(".js-add-item").addEventListener("click",n),document.querySelector(".js-remove-item").addEventListener("click",r)}return{init:o}})();ql.sortable=(()=>{function e(t,n=null){$(".js-sortable").sortable({placeholder:"sortable-placeholder",tolerance:"pointer",update:()=>{let r=Array.from(document.querySelectorAll(t));for(let[o,a]of r.entries())a.value=o;n&&n()}})}return{init:e}})();ql.surveys=function(){return{pageView(){hallofmirrors.helpService.triggerSurvey("5Q1v5DnZQ0jsbJdbum90V2bxk8xZ")},signUpIntent(){hallofmirrors.helpService.triggerSurvey("dQpbQNNCR0jsbJdbum90SpeULku9")}}}();ql.aiFeaturesSurvey=function(){let e={CANCEL:"feedbackCancelled",SUBMIT:"feedbackSubmitted"};function t(){let n=document.querySelector("ql-ai-feedback"),r=o=>{switch(o.type){case e.CANCEL:$("#skills_survey_modal").modal("hide");break;case e.SUBMIT:window.location.reload();break}};n&&(n.addEventListener(e.CANCEL,r),n.addEventListener(e.SUBMIT,r))}return{init:t}}();initFirstTabActive=function(){$(".js-tab").first().addClass("is-active"),$(".js-tab-content").first().addClass("is-active")};initTabListener=function(){$(".js-tab").click(function(){var e=$(this).data("tab");$(".js-tab").removeClass("is-active"),$(this).addClass("is-active"),$(".js-tab-content").removeClass("is-active"),$(".js-tab-content[data-tab='"+e+"']").addClass("is-active")})};initTabs=function(){initTabListener()};ql.toggleButtons=function(){let e="is-toggled",t="local-storage-id";function r(){document.querySelectorAll(".toggle-button").forEach(p=>{p.hasAttribute("for")?(p.addEventListener("click",a,!1),p.addEventListener("keyup",o,!1)):p.disabled=!0})}function o(u){u.keyCode===13&&a.bind(this)()}function a(){this.classList.contains(e)?l(this):d(this)}function d(u){c(u,"on"),u.classList.add(e);let p=s(u);p&&p.classList.add(e)}function l(u){c(u,"off"),u.classList.remove(e);let p=s(u);p&&p.classList.remove(e)}function s(u){return document.getElementById(u.getAttribute("for"))}function c(u,p){u.hasAttribute(t)&&(document.cookie=`toggleButton.${u.getAttribute(t)}= ${p}`)}return{init:r}}();initTooltips=function(){$('[data-toggle="tooltip"]').tooltip()};window.trans={};initLabTranslations=function(e){trans=e};initPaymentTranslations=function(e){trans=e};ql.trixEditor=function(){return{init(e){document.querySelectorAll(".trix-input--dialog").forEach(t=>t.setAttribute("placeholder",e)),document.addEventListener("trix-attachment-add",function(t){t.attachment.remove()})}}}();ql.video={survey:function(){function e(){let t=document.querySelector('meta[name="survey-video-ids"]'),n=t?t.content.split(",").map(o=>o.trim()):[],r=document.querySelector("ql-youtube-video");if(r&&n.includes(r.videoId)){let o=!1;r.addEventListener("youtube-state-changed",a=>{a.detail===YT.PlayerState.PLAYING&&(o||(hallofmirrors.helpService.triggerSurvey("Yw9u7T4MF0jsbJdbum90XNtmFrcH",!1,void 0,{videoId:r.videoId}),o=!0))})}}return{init:e}}()};ql.affiliateAutocomplete=function(){function e(){$(".js-affiliate-user-autocomplete").userAutocomplete({source:function(n,r){let o=`?q[${this.element[0].dataset.query}]=${n.term}`;ql.getJson(this.element[0].dataset.autocomplete+o).then(a=>{r(a.map(d=>({label:d,value:d.email})))})},open:function(n,r){$(".js-add-new-user").click(t)}})}function t(n){let r=$(".js-affiliate-user-autocomplete").val();$('.js-new-user input[type="email"]').val(r),$(".js-new-user").removeClass("is-hidden"),$(".js-existing-user").addClass("is-hidden")}return{init:e}}();retrieve_selected_emails=function(e){if($(e)[0].value)return;let t="";$(".selectable:checked").each((n,r)=>{t=t.concat("<input name='selected_emails[]' value="+r.value+" hidden='True'></input>")}),e&&($(t).insertBefore($(e)[0]),$(e)[0].remove())};})();
/*! Bundled license information:

clipboard/dist/clipboard.js:
  (*!
   * clipboard.js v2.0.11
   * https://clipboardjs.com/
   *
   * Licensed MIT  Zeno Rocha
   *)
*/
